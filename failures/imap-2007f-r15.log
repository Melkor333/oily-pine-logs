>>> imap: Validating /home/packager/oily-pine/main/imap/APKBUILD...
>>> imap: Cleaning up srcdir
>>> imap: Cleaning up pkgdir
>>> imap: Cleaning up tmpdir
>>> imap: Fetching http://ftp.ntua.gr/pub/net/mail/imap/imap-2007f.tar.gz
>>> imap: Fetching http://ftp.ntua.gr/pub/net/mail/imap/imap-2007f.tar.gz
>>> imap: Checking sha512sums...
imap-2007f.tar.gz: OK
fix-linking.patch: OK
c-client-2006k_KOLAB_Annotations.patch: OK
1006_openssl1.1_autoverify.patch: OK
2014_openssl1.1.1_sni.patch: OK
>>> imap: Preparing build chroot...
installing oils!
fetch http://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz
WARNING: opening /home/packager/packages//# for oils: No such file or directory
(1/73) Installing musl (1.2.5-r13)
(2/73) Installing libcrypto3 (3.5.1-r0)
(3/73) Installing libssl3 (3.5.1-r0)
(4/73) Installing zlib (1.3.1-r2)
(5/73) Installing zstd-libs (1.5.7-r1)
(6/73) Installing libapk (3.0.0_rc5_git20250613-r0)
(7/73) Installing ca-certificates-bundle (20241121-r2)
(8/73) Installing apk-tools (3.0.0_rc5_git20250613-r0)
(9/73) Installing libcap2 (2.76-r0)
(10/73) Installing libcap-getcap (2.76-r0)
(11/73) Installing fakeroot (1.37.1.2-r0)
(12/73) Installing scanelf (1.3.8-r1)
(13/73) Installing musl-utils (1.2.5-r13)
(14/73) Installing libgcc (14.3.0-r5)
(15/73) Installing libstdc++ (14.3.0-r5)
(16/73) Installing lzip (1.25-r0)
(17/73) Installing openssl (3.5.1-r0)
(18/73) Installing patch (2.8-r0)
(19/73) Installing pkgconf (2.5.1-r0)
(20/73) Installing acl-libs (2.3.2-r1)
(21/73) Installing tar (1.35-r4)
(22/73) Installing alpine-baselayout-data (3.7.0-r0)
(23/73) Installing busybox (1.37.0-r19)
Executing busybox-1.37.0-r19.post-install
(24/73) Installing ssl_client (1.37.0-r19)
(25/73) Installing ncurses-terminfo-base (6.5_p20250705-r0)
(26/73) Installing libncursesw (6.5_p20250705-r0)
(27/73) Installing readline (8.3.0-r1)
(28/73) Installing oils-for-unix (0.28.0-r0)
(29/73) Installing oils-for-unix-binsh (0.28.0-r0)
(30/73) Installing abuild (3.15.0-r2)
Executing abuild-3.15.0-r2.pre-install
(31/73) Installing abuild-sudo (3.15.0-r2)
(32/73) Installing alpine-baselayout (3.7.0-r0)
Executing alpine-baselayout-3.7.0-r0.pre-install
Executing alpine-baselayout-3.7.0-r0.post-install
(33/73) Installing bridge (1.5-r5)
(34/73) Installing ifupdown-ng (0.12.1-r7)
(35/73) Installing openrc-user (0.62.5-r0)
(36/73) Installing openrc (0.62.5-r0)
Executing openrc-0.62.5-r0.post-install
(37/73) Installing mdev-conf (4.8-r0)
(38/73) Installing busybox-mdev-openrc (1.37.0-r19)
(39/73) Installing alpine-conf (3.20.0-r0)
(40/73) Installing alpine-keys (2.5-r0)
(41/73) Installing alpine-release (3.23.0_alpha20250612-r0)
(42/73) Installing busybox-openrc (1.37.0-r19)
(43/73) Installing busybox-suid (1.37.0-r19)
(44/73) Installing alpine-base (3.23.0_alpha20250612-r0)
(45/73) Installing jansson (2.14.1-r0)
(46/73) Installing binutils (2.44-r0)
(47/73) Installing libmagic (5.46-r2)
(48/73) Installing file (5.46-r2)
(49/73) Installing libgomp (14.3.0-r5)
(50/73) Installing libatomic (14.3.0-r5)
(51/73) Installing gmp (6.3.0-r4)
(52/73) Installing isl26 (0.26-r1)
(53/73) Installing mpfr4 (4.2.2-r0)
(54/73) Installing mpc1 (1.3.1-r1)
(55/73) Installing gcc (14.3.0-r5)
(56/73) Installing libstdc++-dev (14.3.0-r5)
(57/73) Installing musl-dev (1.2.5-r13)
(58/73) Installing g++ (14.3.0-r5)
(59/73) Installing make (4.4.1-r3)
(60/73) Installing fortify-headers (1.1-r5)
(61/73) Installing build-base (0.5-r3)
(62/73) Installing brotli-libs (1.1.0-r2)
(63/73) Installing c-ares (1.34.5-r0)
(64/73) Installing libunistring (1.3-r0)
(65/73) Installing libidn2 (2.3.8-r0)
(66/73) Installing nghttp2-libs (1.66.0-r0)
(67/73) Installing libpsl (0.21.5-r3)
(68/73) Installing libcurl (8.14.1-r2)
(69/73) Installing libexpat (2.7.1-r0)
(70/73) Installing pcre2 (10.43-r1)
(71/73) Installing git (2.50.1-r0)
(72/73) Installing git-init-template (2.50.1-r0)
(73/73) Installing openssl-dev (3.5.1-r0)
Executing busybox-1.37.0-r19.trigger
OK: 277 MiB in 73 packages
>>> imap: Fetching http://ftp.ntua.gr/pub/net/mail/imap/imap-2007f.tar.gz
>>> imap: Checking sha512sums...
imap-2007f.tar.gz: OK
fix-linking.patch: OK
c-client-2006k_KOLAB_Annotations.patch: OK
1006_openssl1.1_autoverify.patch: OK
2014_openssl1.1.1_sni.patch: OK
>>> imap: Unpacking /var/cache/distfiles/imap-2007f.tar.gz...
>>> imap: fix-linking.patch
patching file src/osdep/unix/Makefile
>>> imap: c-client-2006k_KOLAB_Annotations.patch
patching file src/c-client/imap4r1.c
Hunk #1 succeeded at 133 (offset -2 lines).
Hunk #2 succeeded at 204 (offset -2 lines).
Hunk #3 succeeded at 2767 (offset 10 lines).
Hunk #4 succeeded at 2897 (offset 10 lines).
Hunk #5 succeeded at 3039 (offset 10 lines).
Hunk #6 succeeded at 3054 (offset 10 lines).
Hunk #7 succeeded at 3238 (offset 10 lines).
Hunk #8 succeeded at 4194 (offset 10 lines).
patching file src/c-client/imap4r1.h
patching file src/c-client/mail.c
Hunk #1 succeeded at 67 (offset -2 lines).
Hunk #2 succeeded at 597 (offset -2 lines).
Hunk #3 succeeded at 5720 (offset 13 lines).
Hunk #4 succeeded at 6051 (offset 13 lines).
patching file src/c-client/mail.h
Hunk #1 succeeded at 353 (offset 2 lines).
Hunk #2 succeeded at 1048 (offset 3 lines).
Hunk #3 succeeded at 1376 (offset 3 lines).
Hunk #4 succeeded at 1795 (offset 3 lines).
patching file src/mtest/mtest.c
>>> imap: 1006_openssl1.1_autoverify.patch
patching file src/osdep/unix/ssl_unix.c
>>> imap: 2014_openssl1.1.1_sni.patch
patching file src/osdep/unix/ssl_unix.c
make[1]: Entering directory '/tmp/src/imap-2007f'
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Building in PARTIAL compliance with RFC 3501 security
+ requirements:
+ Compliant:
++ TLS/SSL encryption is supported
+ Non-compliant:
++ Unencrypted plaintext passwords are permitted
+
+ In order to rectify this problem, you MUST build with:
++ SSLTYPE=unix.nopwd
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Do you want to continue this build anyway? Type y or n please:
make[1]: Leaving directory '/tmp/src/imap-2007f'
Applying an process to sources...
tools/an "ln -s" src/c-client c-client
tools/an "ln -s" src/ansilib c-client
tools/an "ln -s" src/charset c-client
tools/an "ln -s" src/osdep/unix c-client
tools/an "ln -s" src/mtest mtest
tools/an "ln -s" src/ipopd ipopd
tools/an "ln -s" src/imapd imapd
tools/an "ln -s" src/mailutil mailutil
tools/an "ln -s" src/mlock mlock
tools/an "ln -s" src/dmail dmail
tools/an "ln -s" src/tmail tmail
ln -s tools/an .
make build EXTRACFLAGS='-Os -fstack-clash-protection -Wformat -Werror=format-security -fno-plt -fPIC -fpermissive' EXTRALDFLAGS='-Wl,--as-needed,-O1,--sort-common -Wl,-z,pack-relative-relocs' EXTRADRIVERS='mbox' EXTRAAUTHENTICATORS='' PASSWDTYPE=std SSLTYPE=unix IP=4 EXTRASPECIALS='' BUILDTYPE=slx
make[1]: Entering directory '/tmp/src/imap-2007f'
make[2]: Entering directory '/tmp/src/imap-2007f'
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Building with IPv4 support
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
make[2]: Leaving directory '/tmp/src/imap-2007f'
Building c-client for slx...
echo `cat SPECIALS`  > c-client/SPECIALS
cd c-client;make slx EXTRACFLAGS='-Os -fstack-clash-protection -Wformat -Werror=format-security -fno-plt -fPIC -fpermissive'\
 EXTRALDFLAGS='-Wl,--as-needed,-O1,--sort-common -Wl,-z,pack-relative-relocs'\
 EXTRADRIVERS='mbox'\
 EXTRAAUTHENTICATORS=''\
 PASSWDTYPE=std SSLTYPE=unix IP=4\
  
make[2]: Entering directory '/tmp/src/imap-2007f/c-client'
You are building for libc6/glibc versions of Secure Linux
If you want libc5 versions you must use sl5 instead!
If you want libc4 versions you must use sl4 instead!
make build EXTRACFLAGS='-Os -fstack-clash-protection -Wformat -Werror=format-security -fno-plt -fPIC -fpermissive' EXTRALDFLAGS='-Wl,--as-needed,-O1,--sort-common -Wl,-z,pack-relative-relocs' EXTRADRIVERS='mbox' EXTRAAUTHENTICATORS='' PASSWDTYPE=std SSLTYPE=unix IP=4 `cat SPECIALS` OS=slx \
 SIGTYPE=psx CHECKPW=psx CRXTYPE=nfs \
 SPOOLDIR=/var/spool \
 ACTIVEFILE=/var/lib/news/active \
 RSHPATH=/usr/bin/rsh \
 BASECFLAGS="-g -O2 -pipe -fno-omit-frame-pointer" \
 BASELDFLAGS="-lcrypt"
make[3]: Entering directory '/tmp/src/imap-2007f/c-client'
sh -c 'rm -rf auths.c crexcl.c ip_unix.c linkage.[ch] siglocal.c osdep*.[ch] *.o ARCHIVE *FLAGS *TYPE c-client.a || true'
Building with SSL
ln -s ssl_unix.c osdepssl.c
echo -I/usr/include -I/usr/include/openssl -DSSL_CERT_DIRECTORY=\"/etc/ssl/certs\" -DSSL_KEY_DIRECTORY=\"/etc/ssl/certs\" >> OSCFLAGS
echo "  ssl_onceonlyinit ();" >> linkage.c
echo -L/usr/lib -lssl -lcrypto  >> LDFLAGS
Once-only environment setup...
echo cc > CCTYPE
echo `cat CFLAGS` -g -O2 -pipe -fno-omit-frame-pointer '-Os -fstack-clash-protection -Wformat -Werror=format-security -fno-plt -fPIC -fpermissive' -DCHUNKSIZE=65536 > CFLAGS
echo `cat OSCFLAGS` -DCREATEPROTO=unixproto -DEMPTYPROTO=unixproto \
 -DMD5ENABLE=\"/etc/cram-md5.pwd\" -DMAILSPOOL=\"/var/spool/mail\" \
 -DANONYMOUSHOME=\"/var/spool/mail/anonymous\" \
 -DACTIVEFILE=\"/var/lib/news/active\" -DNEWSSPOOL=\"/var/spool/news\" \
 -DRSHPATH=\"/usr/bin/rsh\" -DLOCKPGM=\"\" \
 -DLOCKPGM1=\"/usr/libexec/mlock\" -DLOCKPGM2=\"/usr/sbin/mlock\" \
 -DLOCKPGM3=\"/etc/mlock\" > OSCFLAGS
echo `cat LDFLAGS` -lcrypt -lcrypt -Wl,--as-needed,-O1,--sort-common -Wl,-z,pack-relative-relocs > LDFLAGS
echo "ar rc c-client.a osdep.o mail.o misc.o newsrc.o smanager.o utf8.o utf8aux.o siglocal.o dummy.o pseudo.o netmsg.o flstring.o fdstring.o rfc822.o nntp.o smtp.o imap4r1.o pop3.o unix.o mbx.o mmdf.o tenex.o mtx.o news.o phile.o mh.o mx.o mix.o;ranlib c-client.a" > ARCHIVE
echo "`cat CCTYPE` `cat CFLAGS` `cat OSFLAGS` -shared \
 -Wl,-soname,libc-client.so.1 -o libc-client.so.1.0.0 osdep.o mail.o misc.o newsrc.o smanager.o utf8.o utf8aux.o siglocal.o dummy.o pseudo.o netmsg.o flstring.o fdstring.o rfc822.o nntp.o smtp.o imap4r1.o pop3.o unix.o mbx.o mmdf.o tenex.o mtx.o news.o phile.o mh.o mx.o mix.o `cat LDFLAGS`" \
 >> ARCHIVE
  echo "`cat CCTYPE` `cat CFLAGS` `cat OSFLAGS` -shared \
                                       ^
[ backticks in [ -c flag ] ]:1: Can't open 'OSFLAGS': No such file or directory
echo slx > OSTYPE
./drivers mbox imap nntp pop3 mix mx mbx tenex mtx mh mmdf unix news phile dummy
./mkauths  ext md5 pla log
echo "  mail_versioncheck (CCLIENTVERSION);" >> linkage.c
ln -s os_slx.h osdep.h
ln -s os_slx.c osdepbas.c
ln -s log_std.c osdeplog.c
ln -s sig_psx.c siglocal.c
ln -s crx_nfs.c crexcl.c
ln -s ip4_unix.c ip_unix.c
sh -c '(test slx = sc5 -o slx = sco -o ! -f /usr/include/sys/statvfs.h) && echo -DNOFSTATVFS >> OSCFLAGS || fgrep statvfs64 /usr/include/sys/statvfs.h > /dev/null || echo -DNOFSTATVFS64 >> OSCFLAGS'
Standard password authentication
ln -s ckp_psx.c osdepckp.c
cat osdepbas.c osdepckp.c osdeplog.c osdepssl.c > osdep.c
Building OS-dependent module
If you get No such file error messages for files x509.h, ssl.h,
pem.h, buffer.h, bio.h, and crypto.h, that means that OpenSSL
is not installed on your system. Either install OpenSSL first
or build with command: make slx SSLTYPE=none
`cat CCTYPE` -c `cat CFLAGS` `cat OSCFLAGS` -c osdep.c
In file included from osdep.c:31:
env_unix.c: In function 'lock_work':
osdep.h:60:15: warning: implicit declaration of function 'safe_flock' [-Wimplicit-function-declaration]
   60 | #define flock safe_flock
      |               ^~~~~~~~~~
env_unix.c:1374:27: note: in expansion of macro 'flock'
 1374 |     if (op & LOCK_NB) i = flock (fd,op);
      |                           ^~~~~
osdep.c: At top level:
osdep.c:231:10: fatal error: x509v3.h: No such file or directory
  231 | #include <x509v3.h>
      |          ^~~~~~~~~~
compilation terminated.
make[3]: *** [Makefile:926: osdep.o] Error 1
make[3]: Leaving directory '/tmp/src/imap-2007f/c-client'
make[2]: *** [Makefile:677: slx] Error 2
make[2]: Leaving directory '/tmp/src/imap-2007f/c-client'
make[1]: *** [Makefile:688: OSTYPE] Error 2
make[1]: Leaving directory '/tmp/src/imap-2007f'
make: *** [Makefile:311: slx] Error 2
>>> ERROR: imap: build failed
>>> ERROR: imap: rootbld failed
>>> imap: Cleaning up build chroot
