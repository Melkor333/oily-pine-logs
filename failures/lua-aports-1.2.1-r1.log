>>> lua-aports: Validating /home/packager/oily-pine/main/lua-aports/APKBUILD...
>>> lua-aports: Cleaning up srcdir
>>> lua-aports: Cleaning up pkgdir
>>> lua-aports: Cleaning up tmpdir
>>> lua-aports: Fetching lua-aports-1.2.1.tar.gz::https://gitlab.alpinelinux.org/alpine/lua-aports/-/archive/1.2.1/lua-aports-1.2.1.tar.gz
>>> lua-aports: Fetching lua-aports-1.2.1.tar.gz::https://gitlab.alpinelinux.org/alpine/lua-aports/-/archive/1.2.1/lua-aports-1.2.1.tar.gz
>>> lua-aports: Checking sha512sums...
lua-aports-1.2.1.tar.gz: OK
>>> lua-aports: Preparing build chroot...
installing oils!
fetch http://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz
WARNING: opening /home/packager/packages//# for oils: No such file or directory
(1/89) Installing musl (1.2.5-r13)
(2/89) Installing libcrypto3 (3.5.1-r0)
(3/89) Installing libssl3 (3.5.1-r0)
(4/89) Installing zlib (1.3.1-r2)
(5/89) Installing zstd-libs (1.5.7-r1)
(6/89) Installing libapk (3.0.0_rc5_git20250613-r0)
(7/89) Installing ca-certificates-bundle (20241121-r2)
(8/89) Installing apk-tools (3.0.0_rc5_git20250613-r0)
(9/89) Installing libcap2 (2.76-r0)
(10/89) Installing libcap-getcap (2.76-r0)
(11/89) Installing fakeroot (1.37.1.2-r0)
(12/89) Installing scanelf (1.3.8-r1)
(13/89) Installing musl-utils (1.2.5-r13)
(14/89) Installing libgcc (14.3.0-r5)
(15/89) Installing libstdc++ (14.3.0-r5)
(16/89) Installing lzip (1.25-r0)
(17/89) Installing openssl (3.5.1-r0)
(18/89) Installing patch (2.8-r0)
(19/89) Installing pkgconf (2.5.1-r0)
(20/89) Installing acl-libs (2.3.2-r1)
(21/89) Installing tar (1.35-r4)
(22/89) Installing alpine-baselayout-data (3.7.0-r0)
(23/89) Installing busybox (1.37.0-r18)
Executing busybox-1.37.0-r18.post-install
(24/89) Installing ssl_client (1.37.0-r18)
(25/89) Installing ncurses-terminfo-base (6.5_p20250705-r0)
(26/89) Installing libncursesw (6.5_p20250705-r0)
(27/89) Installing readline (8.3.0-r1)
(28/89) Installing oils-for-unix (0.28.0-r0)
(29/89) Installing oils-for-unix-binsh (0.28.0-r0)
(30/89) Installing abuild (3.15.0-r2)
Executing abuild-3.15.0-r2.pre-install
(31/89) Installing abuild-sudo (3.15.0-r2)
(32/89) Installing alpine-baselayout (3.7.0-r0)
Executing alpine-baselayout-3.7.0-r0.pre-install
Executing alpine-baselayout-3.7.0-r0.post-install
(33/89) Installing bridge (1.5-r5)
(34/89) Installing ifupdown-ng (0.12.1-r7)
(35/89) Installing openrc-user (0.62.5-r0)
(36/89) Installing openrc (0.62.5-r0)
Executing openrc-0.62.5-r0.post-install
(37/89) Installing mdev-conf (4.8-r0)
(38/89) Installing busybox-mdev-openrc (1.37.0-r18)
(39/89) Installing alpine-conf (3.20.0-r0)
(40/89) Installing alpine-keys (2.5-r0)
(41/89) Installing alpine-release (3.23.0_alpha20250612-r0)
(42/89) Installing busybox-openrc (1.37.0-r18)
(43/89) Installing busybox-suid (1.37.0-r18)
(44/89) Installing alpine-base (3.23.0_alpha20250612-r0)
(45/89) Installing jansson (2.14.1-r0)
(46/89) Installing binutils (2.44-r0)
(47/89) Installing libmagic (5.46-r2)
(48/89) Installing file (5.46-r2)
(49/89) Installing libgomp (14.3.0-r5)
(50/89) Installing libatomic (14.3.0-r5)
(51/89) Installing gmp (6.3.0-r4)
(52/89) Installing isl26 (0.26-r1)
(53/89) Installing mpfr4 (4.2.2-r0)
(54/89) Installing mpc1 (1.3.1-r1)
(55/89) Installing gcc (14.3.0-r5)
(56/89) Installing libstdc++-dev (14.3.0-r5)
(57/89) Installing musl-dev (1.2.5-r13)
(58/89) Installing g++ (14.3.0-r5)
(59/89) Installing make (4.4.1-r3)
(60/89) Installing fortify-headers (1.1-r5)
(61/89) Installing build-base (0.5-r3)
(62/89) Installing brotli-libs (1.1.0-r2)
(63/89) Installing c-ares (1.34.5-r0)
(64/89) Installing libunistring (1.3-r0)
(65/89) Installing libidn2 (2.3.8-r0)
(66/89) Installing nghttp2-libs (1.66.0-r0)
(67/89) Installing libpsl (0.21.5-r3)
(68/89) Installing libcurl (8.14.1-r2)
(69/89) Installing libexpat (2.7.1-r0)
(70/89) Installing pcre2 (10.43-r1)
(71/89) Installing git (2.50.1-r0)
(72/89) Installing git-init-template (2.50.1-r0)
(73/89) Installing lua5.4-libs (5.4.8-r0)
(74/89) Installing lua5.4 (5.4.8-r0)
(75/89) Installing lua5.4-cjson (2.1.0-r11)
(76/89) Installing lua-cliargs (3.0.2-r0)
(77/89) Installing lua5.4-say (1.4.1-r0)
(78/89) Installing lua5.4-luassert (1.9.0-r0)
(79/89) Installing lua5.4-mediator (1.1.2-r2)
(80/89) Installing lua5.4-filesystem (1.8.0-r4)
(81/89) Installing lua-filesystem (1.8.0-r4)
(82/89) Installing lua-penlight (1.14.0-r0)
(83/89) Installing lua5.4-penlight (1.14.0-r0)
(84/89) Installing lua5.4-system (0.4.5-r0)
(85/89) Installing lua5.4-term (0.07-r2)
(86/89) Installing lua5.4-busted (2.2.0-r0)
(87/89) Installing lua5.4-optarg (0.4-r0)
(88/89) Installing lua5.4-bit32 (5.3.0-r6)
(89/89) Installing lua5.4-posix (36.3-r0)
Executing busybox-1.37.0-r18.trigger
OK: 278 MiB in 89 packages
>>> lua-aports: Fetching lua-aports-1.2.1.tar.gz::https://gitlab.alpinelinux.org/alpine/lua-aports/-/archive/1.2.1/lua-aports-1.2.1.tar.gz
>>> lua-aports: Checking sha512sums...
lua-aports-1.2.1.tar.gz: OK
>>> lua-aports: Unpacking /var/cache/distfiles/lua-aports-1.2.1.tar.gz...
[==========] Running tests from scanned files.
[----------] Global test environment setup.
[----------] Running tests from spec/abuild_spec.lua
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
[ RUN      ] spec/abuild_spec.lua:36: abuild get_conf should return the value of a configuration variable from the user config
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/abuild_spec.lua:37: Expected objects to be equal.
Passed in:
(string) ''
Expected:
(string) 'myvalue'

stack traceback:
	spec/abuild_spec.lua:37: in function <spec/abuild_spec.lua:36>

[  FAILED  ] spec/abuild_spec.lua:36: abuild get_conf should return the value of a configuration variable from the user config (8.09 ms)
[ RUN      ] spec/abuild_spec.lua:43: abuild get_arch should return the CARCH value from the environment
[       OK ] spec/abuild_spec.lua:43: abuild get_arch should return the CARCH value from the environment (0.04 ms)
[ RUN      ] spec/abuild_spec.lua:49: abuild get_arch should return the CARCH value from user config
spec/abuild_spec.lua:50: Expected objects to be equal.
Passed in:
(string) ''
Expected:
(string) 'aarch64'

stack traceback:
	spec/abuild_spec.lua:50: in function <spec/abuild_spec.lua:49>

[  FAILED  ] spec/abuild_spec.lua:49: abuild get_arch should return the CARCH value from user config (1.43 ms)
[ RUN      ] spec/abuild_spec.lua:57: abuild get_libc should return the libc value from the user config
spec/abuild_spec.lua:58: Expected objects to be equal.
Passed in:
(string) ''
Expected:
(string) 'musl'

stack traceback:
	spec/abuild_spec.lua:58: in function <spec/abuild_spec.lua:57>

[  FAILED  ] spec/abuild_spec.lua:57: abuild get_libc should return the libc value from the user config (1.43 ms)
[ RUN      ] spec/abuild_spec.lua:65: abuild abuild.repodest should contain the REPODEST value from the user config
spec/abuild_spec.lua:66: Expected objects to be equal.
Passed in:
(string) ''
Expected:
(string) '/tmp/lua_hDMKep'

stack traceback:
	spec/abuild_spec.lua:66: in function <spec/abuild_spec.lua:65>

[  FAILED  ] spec/abuild_spec.lua:65: abuild abuild.repodest should contain the REPODEST value from the user config (1.40 ms)
[ RUN      ] spec/abuild_spec.lua:72: abuild abuild.chost should contain the CHOST value from the user config
spec/abuild_spec.lua:73: Expected objects to be equal.
Passed in:
(string) ''
Expected:
(string) 'aarch64-alpine-linux-musl'

stack traceback:
	spec/abuild_spec.lua:73: in function <spec/abuild_spec.lua:72>

[  FAILED  ] spec/abuild_spec.lua:72: abuild abuild.chost should contain the CHOST value from the user config (1.41 ms)
[----------] 6 tests from spec/abuild_spec.lua (68.01 ms total)

[----------] Running tests from spec/db_spec.lua
[ RUN      ] spec/db_spec.lua:66: db new should initialize the APK database correctly
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:74: Expected objects to not be the same.
Passed in:
(nil)
Did not expect:
type nil

stack traceback:
	spec/db_spec.lua:74: in function <spec/db_spec.lua:66>

[  FAILED  ] spec/db_spec.lua:66: db new should initialize the APK database correctly (42.99 ms)
[ RUN      ] spec/db_spec.lua:81: db target_packages should list all target packages
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:86: Expected objects to not be the same.
Passed in:
(nil)
Did not expect:
type nil

stack traceback:
	spec/db_spec.lua:86: in function <spec/db_spec.lua:81>

[  FAILED  ] spec/db_spec.lua:81: db target_packages should list all target packages (7.95 ms)
[ RUN      ] spec/db_spec.lua:96: db recursive_dependencies should list all dependencies in correct order
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:108: Expected objects to not be the same.
Passed in:
(nil)
Did not expect:
type nil

stack traceback:
	spec/db_spec.lua:108: in function <spec/db_spec.lua:96>

[  FAILED  ] spec/db_spec.lua:96: db recursive_dependencies should list all dependencies in correct order (8.59 ms)
[ RUN      ] spec/db_spec.lua:118: db recursive_reverse_dependencies should list all reverse dependencies in correct order
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:127: Expected objects to not be the same.
Passed in:
(nil)
Did not expect:
type nil

stack traceback:
	spec/db_spec.lua:127: in function <spec/db_spec.lua:118>

[  FAILED  ] spec/db_spec.lua:118: db recursive_reverse_dependencies should list all reverse dependencies in correct order (8.77 ms)
[ RUN      ] spec/db_spec.lua:137: db each_name should list all apk names and its origin
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:145: Expected objects to not be the same.
Passed in:
(nil)
Did not expect:
type nil

stack traceback:
	spec/db_spec.lua:145: in function <spec/db_spec.lua:137>

[  FAILED  ] spec/db_spec.lua:137: db each_name should list all apk names and its origin (8.44 ms)
[ RUN      ] spec/db_spec.lua:155: db each_known_dependency should list all known dependencies
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:164: attempt to index a nil value (local 'repo1')

stack traceback:
	spec/db_spec.lua:164: in function <spec/db_spec.lua:155>

[  ERROR   ] spec/db_spec.lua:155: db each_known_dependency should list all known dependencies (8.20 ms)
[ RUN      ] spec/db_spec.lua:169: db each_known_dependency should list a provides as a known dependencies
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:178: attempt to index a nil value (local 'repo1')

stack traceback:
	spec/db_spec.lua:178: in function <spec/db_spec.lua:169>

[  ERROR   ] spec/db_spec.lua:169: db each_known_dependency should list a provides as a known dependencies (8.08 ms)
[ RUN      ] spec/db_spec.lua:186: db each_aport should list all apk names and its origin
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:195: attempt to index a nil value (local 'repo1')

stack traceback:
	spec/db_spec.lua:195: in function <spec/db_spec.lua:186>

[  ERROR   ] spec/db_spec.lua:186: db each_aport should list all apk names and its origin (7.95 ms)
[ RUN      ] spec/db_spec.lua:203: db each_pkg_with_name should only list the origin(s) for the given package names
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:213: attempt to index a nil value (local 'repo1')

stack traceback:
	spec/db_spec.lua:213: in function <spec/db_spec.lua:203>

[  ERROR   ] spec/db_spec.lua:203: db each_pkg_with_name should only list the origin(s) for the given package names (8.77 ms)
[ RUN      ] spec/db_spec.lua:221: db each_provider_for should list the providing origins for the given package names
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:231: attempt to index a nil value (local 'repo1')

stack traceback:
	spec/db_spec.lua:231: in function <spec/db_spec.lua:221>

[  ERROR   ] spec/db_spec.lua:221: db each_provider_for should list the providing origins for the given package names (7.80 ms)
[ RUN      ] spec/db_spec.lua:239: db each_need_build should list all aports that don't have built apk file
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:249: attempt to index a nil value (local 'repo1')

stack traceback:
	spec/db_spec.lua:249: in function <spec/db_spec.lua:239>

[  ERROR   ] spec/db_spec.lua:239: db each_need_build should list all aports that don't have built apk file (8.07 ms)
[ RUN      ] spec/db_spec.lua:270: db each_in_build_order should list the specified aports in build order
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:273: attempt to index a nil value (local 'repo1')

stack traceback:
	spec/db_spec.lua:273: in function <spec/db_spec.lua:270>

[  ERROR   ] spec/db_spec.lua:270: db each_in_build_order should list the specified aports in build order (7.77 ms)
[ RUN      ] spec/db_spec.lua:278: db each_in_build_order should not include other provides when deternmining build order
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:281: attempt to index a nil value (local 'repo1')

stack traceback:
	spec/db_spec.lua:281: in function <spec/db_spec.lua:278>

[  ERROR   ] spec/db_spec.lua:278: db each_in_build_order should not include other provides when deternmining build order (9.01 ms)
[ RUN      ] spec/db_spec.lua:286: db each_in_build_order should build docs last
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:289: attempt to index a nil value (local 'repo1')

stack traceback:
	spec/db_spec.lua:289: in function <spec/db_spec.lua:286>

[  ERROR   ] spec/db_spec.lua:286: db each_in_build_order should build docs last (8.39 ms)
[ RUN      ] spec/db_spec.lua:297: db known_deps_exists should return true
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
spec/db_spec.lua:307: attempt to index a nil value (local 'repo1')

stack traceback:
	spec/db_spec.lua:307: in function <spec/db_spec.lua:297>

[  ERROR   ] spec/db_spec.lua:297: db known_deps_exists should return true (9.17 ms)
[----------] 15 tests from spec/db_spec.lua (207.57 ms total)

[----------] Running tests from spec/pkg_spec.lua
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
Unable to deduce build architecture. Install apk-tools, or set CBUILD.
[ RUN      ] spec/pkg_spec.lua:40: aports.pkg is_remote should return true for remote URLs
[       OK ] spec/pkg_spec.lua:40: aports.pkg is_remote should return true for remote URLs (0.08 ms)
[ RUN      ] spec/pkg_spec.lua:48: aports.pkg should return false for non-remote URLs
[       OK ] spec/pkg_spec.lua:48: aports.pkg should return false for non-remote URLs (0.04 ms)
[ RUN      ] spec/pkg_spec.lua:55: aports.pkg remote_sources should iterate over remote sources
[       OK ] spec/pkg_spec.lua:55: aports.pkg remote_sources should iterate over remote sources (0.09 ms)
[ RUN      ] spec/pkg_spec.lua:74: aports.pkg remote_sources should return nil if source is not a table
[       OK ] spec/pkg_spec.lua:74: aports.pkg remote_sources should return nil if source is not a table (0.05 ms)
[ RUN      ] spec/pkg_spec.lua:86: aports.pkg get_maintainer should return the maintainer
[       OK ] spec/pkg_spec.lua:86: aports.pkg get_maintainer should return the maintainer (0.08 ms)
[ RUN      ] spec/pkg_spec.lua:97: aports.pkg get_repo_name should return the repository name when it exists
[       OK ] spec/pkg_spec.lua:97: aports.pkg get_repo_name should return the repository name when it exists (0.04 ms)
[ RUN      ] spec/pkg_spec.lua:101: aports.pkg get_repo_name should return nil when package directory is not provided
[       OK ] spec/pkg_spec.lua:101: aports.pkg get_repo_name should return nil when package directory is not provided (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:107: aports.pkg get_apk_file_name should return the correct apk file name
[       OK ] spec/pkg_spec.lua:107: aports.pkg get_apk_file_name should return the correct apk file name (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:120: aports.pkg get_apk_file_path should return the correct apk file path
spec/pkg_spec.lua:121: Expected objects to be equal.
Passed in:
(string) '/tmp/lua_OmGpAI/aports/myrepo/myapp/myapp-doc-1.0-r0.apk'
Expected:
(string) '/tmp/lua_OmGpAI/pkgs/myrepo/aarch64/myapp-doc-1.0-r0.apk'

stack traceback:
	spec/pkg_spec.lua:121: in function <spec/pkg_spec.lua:120>

[  FAILED  ] spec/pkg_spec.lua:120: aports.pkg get_apk_file_path should return the correct apk file path (1.44 ms)
[ RUN      ] spec/pkg_spec.lua:134: aports.pkg apk_file_exists should return false when the apk file does not exist
[       OK ] spec/pkg_spec.lua:134: aports.pkg apk_file_exists should return false when the apk file does not exist (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:143: aports.pkg apk_file_exists should return true when the apk file exists
spec/pkg_spec.lua:150: Expected objects to be the same.
Passed in:
(boolean) false
Expected:
(boolean) true

stack traceback:
	spec/pkg_spec.lua:150: in function <spec/pkg_spec.lua:143>

[  FAILED  ] spec/pkg_spec.lua:143: aports.pkg apk_file_exists should return true when the apk file exists (1.46 ms)
[ RUN      ] spec/pkg_spec.lua:168: aports.pkg all_apks_exists should return false when any apk file does not exist
[       OK ] spec/pkg_spec.lua:168: aports.pkg all_apks_exists should return false when any apk file does not exist (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:180: aports.pkg all_apks_exists should return true when all apk files exist
[       OK ] spec/pkg_spec.lua:180: aports.pkg all_apks_exists should return true when all apk files exist (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:190: aports.pkg arch_enabled should return true when arch is enabled for the package
[       OK ] spec/pkg_spec.lua:190: aports.pkg arch_enabled should return true when arch is enabled for the package (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:194: aports.pkg arch_enabled should return true when all arches are enabled for the package
[       OK ] spec/pkg_spec.lua:194: aports.pkg arch_enabled should return true when all arches are enabled for the package (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:198: aports.pkg arch_enabled should return true for noarch packages
[       OK ] spec/pkg_spec.lua:198: aports.pkg arch_enabled should return true for noarch packages (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:202: aports.pkg arch_enabled should return falsy when arch is empty for the package
[       OK ] spec/pkg_spec.lua:202: aports.pkg arch_enabled should return falsy when arch is empty for the package (0.04 ms)
[ RUN      ] spec/pkg_spec.lua:206: aports.pkg arch_enabled should return false when arch is disabled for the package
[       OK ] spec/pkg_spec.lua:206: aports.pkg arch_enabled should return false when arch is disabled for the package (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:210: aports.pkg arch_enabled should return false when arch is disabled for a noarch package
[       OK ] spec/pkg_spec.lua:210: aports.pkg arch_enabled should return false when arch is disabled for a noarch package (0.87 ms)
[ RUN      ] spec/pkg_spec.lua:216: aports.pkg each_dependency should yield dependencies from 'depends' field
[       OK ] spec/pkg_spec.lua:216: aports.pkg each_dependency should yield dependencies from 'depends' field (0.04 ms)
[ RUN      ] spec/pkg_spec.lua:236: aports.pkg each_dependency should yield dependencies from 'makedepends' field
[       OK ] spec/pkg_spec.lua:236: aports.pkg each_dependency should yield dependencies from 'makedepends' field (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:256: aports.pkg each_dependency should yield dependencies from 'checkdepends' field when options['!check'] is falsy
[       OK ] spec/pkg_spec.lua:256: aports.pkg each_dependency should yield dependencies from 'checkdepends' field when options['!check'] is falsy (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:276: aports.pkg each_dependency should not yield dependencies from 'checkdepends' field when options['!check'] is truthy
[       OK ] spec/pkg_spec.lua:276: aports.pkg each_dependency should not yield dependencies from 'checkdepends' field when options['!check'] is truthy (0.02 ms)
[----------] 23 tests from spec/pkg_spec.lua (93.63 ms total)

[----------] Global test environment teardown.
[==========] 44 tests from 3 test files ran. (369.38 ms total)
[  PASSED  ] 22 tests.
[  FAILED  ] 12 tests, listed below:
[  FAILED  ] spec/abuild_spec.lua:36: abuild get_conf should return the value of a configuration variable from the user config
[  FAILED  ] spec/abuild_spec.lua:49: abuild get_arch should return the CARCH value from user config
[  FAILED  ] spec/abuild_spec.lua:57: abuild get_libc should return the libc value from the user config
[  FAILED  ] spec/abuild_spec.lua:65: abuild abuild.repodest should contain the REPODEST value from the user config
[  FAILED  ] spec/abuild_spec.lua:72: abuild abuild.chost should contain the CHOST value from the user config
[  FAILED  ] spec/db_spec.lua:66: db new should initialize the APK database correctly
[  FAILED  ] spec/db_spec.lua:81: db target_packages should list all target packages
[  FAILED  ] spec/db_spec.lua:96: db recursive_dependencies should list all dependencies in correct order
[  FAILED  ] spec/db_spec.lua:118: db recursive_reverse_dependencies should list all reverse dependencies in correct order
[  FAILED  ] spec/db_spec.lua:137: db each_name should list all apk names and its origin
[  FAILED  ] spec/pkg_spec.lua:120: aports.pkg get_apk_file_path should return the correct apk file path
[  FAILED  ] spec/pkg_spec.lua:143: aports.pkg apk_file_exists should return true when the apk file exists
[  ERROR   ] 10 errors, listed below:
[  ERROR   ] spec/db_spec.lua:155: db each_known_dependency should list all known dependencies
[  ERROR   ] spec/db_spec.lua:169: db each_known_dependency should list a provides as a known dependencies
[  ERROR   ] spec/db_spec.lua:186: db each_aport should list all apk names and its origin
[  ERROR   ] spec/db_spec.lua:203: db each_pkg_with_name should only list the origin(s) for the given package names
[  ERROR   ] spec/db_spec.lua:221: db each_provider_for should list the providing origins for the given package names
[  ERROR   ] spec/db_spec.lua:239: db each_need_build should list all aports that don't have built apk file
[  ERROR   ] spec/db_spec.lua:270: db each_in_build_order should list the specified aports in build order
[  ERROR   ] spec/db_spec.lua:278: db each_in_build_order should not include other provides when deternmining build order
[  ERROR   ] spec/db_spec.lua:286: db each_in_build_order should build docs last
[  ERROR   ] spec/db_spec.lua:297: db known_deps_exists should return true

 12 FAILED TESTS
 10 ERRORS
>>> ERROR: lua-aports: check failed
>>> ERROR: lua-aports: rootbld failed
>>> lua-aports: Cleaning up build chroot
