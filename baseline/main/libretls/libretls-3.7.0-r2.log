>>> libretls: Validating /home/packager/oily-pine/main/libretls/APKBUILD...
>>> libretls: Cleaning up srcdir
>>> libretls: Cleaning up pkgdir
>>> libretls: Cleaning up tmpdir
>>> libretls: Fetching https://causal.agency/libretls/libretls-3.7.0.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0  417k    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0 68  417k   68  288k    0     0   187k      0  0:00:02  0:00:01  0:00:01  187k100  417k  100  417k    0     0   224k      0  0:00:01  0:00:01 --:--:--  224k
>>> libretls: Fetching https://causal.agency/libretls/libretls-3.7.0.tar.gz
>>> libretls: Checking sha512sums...
libretls-3.7.0.tar.gz: OK
test_program.c: OK
>>> libretls: Preparing build chroot...
fetch http://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz
(1/79) Installing musl (1.2.5-r10)
(2/79) Installing libcrypto3 (3.5.0-r0)
(3/79) Installing ca-certificates-bundle (20241121-r2)
(4/79) Installing libssl3 (3.5.0-r0)
(5/79) Installing zlib (1.3.1-r2)
(6/79) Installing libapk2 (2.14.9-r2)
(7/79) Installing apk-tools (2.14.9-r2)
(8/79) Installing libcap2 (2.76-r0)
(9/79) Installing libcap-getcap (2.76-r0)
(10/79) Installing fakeroot (1.37.1.1-r0)
(11/79) Installing scanelf (1.3.8-r1)
(12/79) Installing musl-utils (1.2.5-r10)
(13/79) Installing libgcc (14.3.0-r1)
(14/79) Installing libstdc++ (14.3.0-r1)
(15/79) Installing lzip (1.25-r0)
(16/79) Installing openssl (3.5.0-r0)
(17/79) Installing patch (2.8-r0)
(18/79) Installing pkgconf (2.4.3-r0)
(19/79) Installing acl-libs (2.3.2-r1)
(20/79) Installing tar (1.35-r3)
(21/79) Installing busybox (1.37.0-r18)
Executing busybox-1.37.0-r18.post-install
(22/79) Installing ssl_client (1.37.0-r18)
(23/79) Installing busybox-binsh (1.37.0-r18)
(24/79) Installing abuild (3.15.0-r0)
Executing abuild-3.15.0-r0.pre-install
(25/79) Installing abuild-sudo (3.15.0-r0)
(26/79) Installing alpine-baselayout-data (3.7.0-r0)
(27/79) Installing alpine-baselayout (3.7.0-r0)
Executing alpine-baselayout-3.7.0-r0.pre-install
Executing alpine-baselayout-3.7.0-r0.post-install
(28/79) Installing bridge (1.5-r5)
(29/79) Installing ifupdown-ng (0.12.1-r7)
(30/79) Installing openrc-user (0.62.2-r2)
(31/79) Installing openrc (0.62.2-r2)
Executing openrc-0.62.2-r2.post-install
(32/79) Installing mdev-conf (4.8-r0)
(33/79) Installing busybox-mdev-openrc (1.37.0-r18)
(34/79) Installing alpine-conf (3.20.0-r0)
(35/79) Installing alpine-keys (2.5-r0)
(36/79) Installing alpine-release (3.22.0-r0)
(37/79) Installing busybox-openrc (1.37.0-r18)
(38/79) Installing busybox-suid (1.37.0-r18)
(39/79) Installing alpine-base (3.22.0-r0)
(40/79) Installing m4 (1.4.20-r0)
(41/79) Installing libbz2 (1.0.8-r6)
(42/79) Installing perl (5.40.2-r0)
(43/79) Installing autoconf (2.72-r1)
(44/79) Installing automake (1.18-r0)
(45/79) Installing jansson (2.14.1-r0)
(46/79) Installing zstd-libs (1.5.7-r0)
(47/79) Installing binutils (2.44-r0)
(48/79) Installing libmagic (5.46-r2)
(49/79) Installing file (5.46-r2)
(50/79) Installing libgomp (14.3.0-r1)
(51/79) Installing libatomic (14.3.0-r1)
(52/79) Installing gmp (6.3.0-r3)
(53/79) Installing isl26 (0.26-r1)
(54/79) Installing mpfr4 (4.2.1_p1-r0)
(55/79) Installing mpc1 (1.3.1-r1)
(56/79) Installing gcc (14.3.0-r1)
(57/79) Installing libstdc++-dev (14.3.0-r1)
(58/79) Installing musl-dev (1.2.5-r10)
(59/79) Installing g++ (14.3.0-r1)
(60/79) Installing make (4.4.1-r3)
(61/79) Installing fortify-headers (1.1-r5)
(62/79) Installing build-base (0.5-r3)
(63/79) Installing brotli-libs (1.1.0-r2)
(64/79) Installing c-ares (1.34.5-r0)
(65/79) Installing libunistring (1.3-r0)
(66/79) Installing libidn2 (2.3.7-r0)
(67/79) Installing nghttp2-libs (1.65.0-r0)
(68/79) Installing libpsl (0.21.5-r3)
(69/79) Installing libcurl (8.14.0-r2)
(70/79) Installing libexpat (2.7.1-r0)
(71/79) Installing pcre2 (10.43-r1)
(72/79) Installing git (2.49.0-r0)
(73/79) Installing git-init-template (2.49.0-r0)
(74/79) Installing perl-error (0.17030-r0)
(75/79) Installing perl-git (2.49.0-r0)
(76/79) Installing git-perl (2.49.0-r0)
(77/79) Installing libltdl (2.5.4-r1)
(78/79) Installing libtool (2.5.4-r1)
(79/79) Installing openssl-dev (3.5.0-r0)
Executing busybox-1.37.0-r18.trigger
OK: 304 MiB in 79 packages
>>> libretls: Fetching https://causal.agency/libretls/libretls-3.7.0.tar.gz
>>> libretls: Checking sha512sums...
libretls-3.7.0.tar.gz: OK
test_program.c: OK
>>> libretls: Unpacking /var/cache/distfiles/libretls-3.7.0.tar.gz...
>>> libretls: Updating ./config.sub
checking build system type... x86_64-alpine-linux-musl
checking host system type... x86_64-alpine-linux-musl
checking for a BSD-compatible install... /usr/bin/install -c
checking whether sleep supports fractional seconds... yes
checking filesystem timestamp resolution... 2
checking whether build environment is sane... yes
checking for a race-free mkdir -p... /bin/mkdir -p
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking xargs -n works... yes
checking whether UID '1000' is supported by ustar format... yes
checking whether GID '1000' is supported by ustar format... yes
checking how to create a ustar tar archive... gnutar
checking for x86_64-alpine-linux-musl-cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether the compiler supports GNU C... yes
checking whether cc accepts -g... yes
checking for cc option to enable C11 features... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... gcc3
checking how to print strings... printf
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for fgrep... /bin/grep -F
checking for ld used by cc... /usr/x86_64-alpine-linux-musl/bin/ld
checking if the linker (/usr/x86_64-alpine-linux-musl/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 98304
checking how to convert x86_64-alpine-linux-musl file names to x86_64-alpine-linux-musl format... func_convert_file_noop
checking how to convert x86_64-alpine-linux-musl file names to toolchain format... func_convert_file_noop
checking for /usr/x86_64-alpine-linux-musl/bin/ld option to reload object files... -r
checking for x86_64-alpine-linux-musl-objdump... no
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for x86_64-alpine-linux-musl-dlltool... no
checking for dlltool... no
checking how to associate runtime and link libraries... printf %s\n
checking for x86_64-alpine-linux-musl-ar... no
checking for ar... ar
checking for archiver @FILE support... @
checking for x86_64-alpine-linux-musl-strip... no
checking for strip... strip
checking for x86_64-alpine-linux-musl-ranlib... no
checking for ranlib... ranlib
checking command to parse /usr/bin/nm -B output from cc object... ok
checking for sysroot... no
checking for a working dd... /bin/dd
checking how to truncate binary pipes... /bin/dd bs=4096 count=1
checking for x86_64-alpine-linux-musl-mt... no
checking for mt... no
checking if : is a manifest tool... no
checking for stdio.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for strings.h... yes
checking for sys/stat.h... yes
checking for sys/types.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if cc supports -fno-rtti -fno-exceptions... no
checking for cc option to produce PIC... -fPIC -DPIC
checking if cc PIC flag -fPIC -DPIC works... yes
checking if cc static flag -static works... yes
checking if cc supports -c -o file.o... yes
checking if cc supports -c -o file.o... (cached) yes
checking whether the cc linker (/usr/x86_64-alpine-linux-musl/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking size of time_t... 8
checking if cc supports "-fno-strict-overflow"... yes
checking whether C compiler accepts -Werror... yes
checking whether to add -D_FORTIFY_SOURCE=2 to CPPFLAGS... no
checking if /usr/x86_64-alpine-linux-musl/bin/ld -m elf_x86_64 supports "-Wl,-z,relro"... yes
checking if /usr/x86_64-alpine-linux-musl/bin/ld -m elf_x86_64 supports "-Wl,-z,now"... yes
checking if cc supports "-fstack-protector-strong"... yes
checking whether AS supports .note.GNU-stack... yes
checking dependency style of cc... gcc3
checking if compiling with clang... no
checking whether CC supports -Wno-pointer-sign... yes
checking for netinet/ip.h... yes
checking for asprintf... yes
checking for freezero... no
checking for memmem... yes
checking for reallocarray... yes
checking for recallocarray... no
checking for strlcat... yes
checking for strlcpy... yes
checking for strndup... yes
checking for strnlen... yes
checking for strsep... yes
checking for strtonum... no
checking for timegm... yes
checking for _mkgmtime... no
checking for timespecsub... no
checking for getprogname... no
checking for getpagesize... yes
checking for arc4random... no
checking for arc4random_buf... no
checking for arc4random_uniform... no
checking for explicit_bzero... yes
checking for getauxval... yes
checking for getentropy... yes
checking for timingsafe_bcmp... no
checking for timingsafe_memcmp... no
checking for getauxval... (cached) yes
checking for library containing dl_iterate_phdr... none required
checking for dl_iterate_phdr... yes
checking for library containing pthread_once... none required
checking for library containing pthread_mutex_lock... none required
checking for library containing clock_gettime... none required
checking for clock_gettime... yes
checking whether va_copy exists... yes
checking whether __va_copy exists... no
checking if .gnu.warning accepts long strings... yes
checking for x86_64-alpine-linux-musl-pkg-config... no
checking for pkg-config... pkg-config
checking whether compiling and linking against OpenSSL works... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating include/Makefile
config.status: creating man/Makefile
config.status: creating libtls.pc
config.status: executing depfiles commands
config.status: executing libtool commands
Making all in include
make[1]: Entering directory '/tmp/src/libretls-3.7.0/include'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/tmp/src/libretls-3.7.0/include'
Making all in man
make[1]: Entering directory '/tmp/src/libretls-3.7.0/man'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/tmp/src/libretls-3.7.0/man'
make[1]: Entering directory '/tmp/src/libretls-3.7.0'
  CC       libtls_la-tls.lo
  CC       libtls_la-tls_client.lo
  CC       libtls_la-tls_bio_cb.lo
  CC       libtls_la-tls_config.lo
  CC       libtls_la-tls_conninfo.lo
  CC       libtls_la-tls_keypair.lo
  CC       libtls_la-tls_server.lo
  CC       libtls_la-tls_signer.lo
  CC       libtls_la-tls_ocsp.lo
  CC       libtls_la-tls_peer.lo
  CC       libtls_la-tls_util.lo
  CC       libtls_la-tls_verify.lo
  CC       compat/libcompat_la-freezero.lo
  CC       compat/libcompat_la-getprogname_linux.lo
  CC       compat/libcompat_la-timingsafe_memcmp.lo
  CC       compat/libcompat_la-arc4random.lo
  CC       compat/libcompat_la-arc4random_uniform.lo
tls_signer.c: In function 'tls_signer_free':
tls_signer.c:66:17: warning: 'RSA_free' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
   66 |                 RSA_free(skey->rsa);
      |                 ^~~~~~~~
In file included from tls_signer.c:23:
/usr/include/openssl/rsa.h:304:28: note: declared here
  304 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
      |                            ^~~~~~~~
tls_signer.c:67:17: warning: 'EC_KEY_free' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
   67 |                 EC_KEY_free(skey->ecdsa);
      |                 ^~~~~~~~~~~
In file included from /usr/include/openssl/ecdsa.h:10,
                 from tls_signer.c:21:
/usr/include/openssl/ec.h:1022:28: note: declared here
 1022 | OSSL_DEPRECATEDIN_3_0 void EC_KEY_free(EC_KEY *key);
      |                            ^~~~~~~~~~~
tls_signer.c: In function 'tls_signer_add_keypair_mem':
tls_signer.c:134:9: warning: 'EVP_PKEY_get1_RSA' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  134 |         if ((skey->rsa = EVP_PKEY_get1_RSA(pkey)) == NULL &&
      |         ^~
In file included from /usr/include/openssl/x509.h:29,
                 from /usr/include/openssl/ssl.h:32,
                 from tls_internal.h:27,
                 from tls_signer.c:26:
/usr/include/openssl/evp.h:1407:16: note: declared here
 1407 | struct rsa_st *EVP_PKEY_get1_RSA(EVP_PKEY *pkey);
      |                ^~~~~~~~~~~~~~~~~
tls_signer.c:135:13: warning: 'EVP_PKEY_get1_EC_KEY' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  135 |             (skey->ecdsa = EVP_PKEY_get1_EC_KEY(pkey)) == NULL) {
      |             ^
/usr/include/openssl/evp.h:1433:19: note: declared here
 1433 | struct ec_key_st *EVP_PKEY_get1_EC_KEY(EVP_PKEY *pkey);
      |                   ^~~~~~~~~~~~~~~~~~~~
tls_signer.c: In function 'tls_sign_rsa':
tls_signer.c:209:9: warning: 'RSA_size' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  209 |         if ((rsa_size = RSA_size(skey->rsa)) <= 0) {
      |         ^~
/usr/include/openssl/rsa.h:215:27: note: declared here
  215 | OSSL_DEPRECATEDIN_3_0 int RSA_size(const RSA *rsa);
      |                           ^~~~~~~~
tls_signer.c:219:9: warning: 'RSA_private_encrypt' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  219 |         if ((signature_len = RSA_private_encrypt((int)input_len, input,
      |         ^~
/usr/include/openssl/rsa.h:296:5: note: declared here
  296 | int RSA_private_encrypt(int flen, const unsigned char *from, unsigned char *to,
      |     ^~~~~~~~~~~~~~~~~~~
tls_signer.c: In function 'tls_sign_ecdsa':
tls_signer.c:253:9: warning: 'ECDSA_size' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  253 |         if ((signature_len = ECDSA_size(skey->ecdsa)) <= 0) {
      |         ^~
/usr/include/openssl/ec.h:1474:27: note: declared here
 1474 | OSSL_DEPRECATEDIN_3_0 int ECDSA_size(const EC_KEY *eckey);
      |                           ^~~~~~~~~~
tls_signer.c:263:9: warning: 'ECDSA_sign' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  263 |         if (!ECDSA_sign(0, input, input_len, signature, &signature_len,
      |         ^~
/usr/include/openssl/ec.h:1433:27: note: declared here
 1433 | OSSL_DEPRECATEDIN_3_0 int ECDSA_sign(int type, const unsigned char *dgst,
      |                           ^~~~~~~~~~
tls_signer.c: In function 'tls_rsa_priv_enc':
tls_signer.c:325:9: warning: 'RSA_get_ex_data' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  325 |         pubkey_hash = RSA_get_ex_data(rsa, 0);
      |         ^~~~~~~~~~~
/usr/include/openssl/rsa.h:457:29: note: declared here
  457 | OSSL_DEPRECATEDIN_3_0 void *RSA_get_ex_data(const RSA *r, int idx);
      |                             ^~~~~~~~~~~~~~~
tls_signer.c:326:9: warning: 'RSA_get_ex_data' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  326 |         config = RSA_get_ex_data(rsa, 1);
      |         ^~~~~~
/usr/include/openssl/rsa.h:457:29: note: declared here
  457 | OSSL_DEPRECATEDIN_3_0 void *RSA_get_ex_data(const RSA *r, int idx);
      |                             ^~~~~~~~~~~~~~~
tls_signer.c:348:9: warning: 'RSA_size' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  348 |         if (signature_len > INT_MAX || (int)signature_len > RSA_size(rsa))
      |         ^~
/usr/include/openssl/rsa.h:215:27: note: declared here
  215 | OSSL_DEPRECATEDIN_3_0 int RSA_size(const RSA *rsa);
      |                           ^~~~~~~~
tls_signer.c: In function 'tls_signer_rsa_method':
tls_signer.c:372:9: warning: 'RSA_meth_new' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  372 |         rsa_method = RSA_meth_new("libtls RSA method", 0);
      |         ^~~~~~~~~~
/usr/include/openssl/rsa.h:484:35: note: declared here
  484 | OSSL_DEPRECATEDIN_3_0 RSA_METHOD *RSA_meth_new(const char *name, int flags);
      |                                   ^~~~~~~~~~~~
tls_signer.c:376:9: warning: 'RSA_meth_set_priv_enc' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  376 |         RSA_meth_set_priv_enc(rsa_method, tls_rsa_priv_enc);
      |         ^~~~~~~~~~~~~~~~~~~~~
/usr/include/openssl/rsa.h:521:5: note: declared here
  521 | int RSA_meth_set_priv_enc(RSA_METHOD *rsa,
      |     ^~~~~~~~~~~~~~~~~~~~~
tls_signer.c: In function 'tls_ecdsa_do_sign':
tls_signer.c:400:9: warning: 'EC_KEY_get_ex_data' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  400 |         pubkey_hash = EC_KEY_get_ex_data(eckey, 0);
      |         ^~~~~~~~~~~
/usr/include/openssl/ec.h:1103:29: note: declared here
 1103 | OSSL_DEPRECATEDIN_3_0 void *EC_KEY_get_ex_data(const EC_KEY *key, int idx);
      |                             ^~~~~~~~~~~~~~~~~~
tls_signer.c:401:9: warning: 'EC_KEY_get_ex_data' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  401 |         config = EC_KEY_get_ex_data(eckey, 1);
      |         ^~~~~~
/usr/include/openssl/ec.h:1103:29: note: declared here
 1103 | OSSL_DEPRECATEDIN_3_0 void *EC_KEY_get_ex_data(const EC_KEY *key, int idx);
      |                             ^~~~~~~~~~~~~~~~~~
tls_signer.c: In function 'tls_signer_ecdsa_method':
tls_signer.c:437:9: warning: 'EC_KEY_METHOD_new' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  437 |         ecdsa_method = EC_KEY_METHOD_new(NULL);
      |         ^~~~~~~~~~~~
/usr/include/openssl/ec.h:1480:38: note: declared here
 1480 | OSSL_DEPRECATEDIN_3_0 EC_KEY_METHOD *EC_KEY_METHOD_new(const EC_KEY_METHOD *meth);
      |                                      ^~~~~~~~~~~~~~~~~
tls_signer.c:441:9: warning: 'EC_KEY_METHOD_set_sign' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  441 |         EC_KEY_METHOD_set_sign(ecdsa_method, NULL, NULL, tls_ecdsa_do_sign);
      |         ^~~~~~~~~~~~~~~~~~~~~~
/usr/include/openssl/ec.h:1499:28: note: declared here
 1499 | OSSL_DEPRECATEDIN_3_0 void EC_KEY_METHOD_set_sign
      |                            ^~~~~~~~~~~~~~~~~~~~~~
tls_server.c: In function 'tls_server_ticket_cb':
tls_server.c:194:17: warning: 'HMAC_Init_ex' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  194 |                 if (!HMAC_Init_ex(hctx, key->hmac_key, sizeof(key->hmac_key),
      |                 ^~
In file included from /usr/include/openssl/ssl.h:38,
                 from tls_server.c:25:
/usr/include/openssl/hmac.h:43:27: note: declared here
   43 | OSSL_DEPRECATEDIN_3_0 int HMAC_Init_ex(HMAC_CTX *ctx, const void *key, int len,
      |                           ^~~~~~~~~~~~
tls_server.c:211:17: warning: 'HMAC_Init_ex' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  211 |                 if (!HMAC_Init_ex(hctx, key->hmac_key, sizeof(key->hmac_key),
      |                 ^~
/usr/include/openssl/hmac.h:43:27: note: declared here
   43 | OSSL_DEPRECATEDIN_3_0 int HMAC_Init_ex(HMAC_CTX *ctx, const void *key, int len,
      |                           ^~~~~~~~~~~~
tls.c: In function 'tls_keypair_setup_pkey':
tls.c:468:17: warning: 'EVP_PKEY_get1_RSA' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  468 |                 if ((rsa = EVP_PKEY_get1_RSA(pkey)) == NULL ||
      |                 ^~
In file included from tls.c:29:
/usr/include/openssl/evp.h:1407:16: note: declared here
 1407 | struct rsa_st *EVP_PKEY_get1_RSA(EVP_PKEY *pkey);
      |                ^~~~~~~~~~~~~~~~~
tls.c:469:21: warning: 'RSA_set_ex_data' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  469 |                     RSA_set_ex_data(rsa, 0, keypair->pubkey_hash) == 0) {
      |                     ^~~~~~~~~~~~~~~
In file included from /usr/include/openssl/x509.h:36,
                 from /usr/include/openssl/pem.h:23,
                 from tls.c:30:
/usr/include/openssl/rsa.h:456:27: note: declared here
  456 | OSSL_DEPRECATEDIN_3_0 int RSA_set_ex_data(RSA *r, int idx, void *arg);
      |                           ^~~~~~~~~~~~~~~
tls.c:476:21: warning: 'RSA_set_ex_data' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  476 |                     RSA_set_ex_data(rsa, 1, ctx->config) == 0 ||
      |                     ^~~~~~~~~~~~~~~
/usr/include/openssl/rsa.h:456:27: note: declared here
  456 | OSSL_DEPRECATEDIN_3_0 int RSA_set_ex_data(RSA *r, int idx, void *arg);
      |                           ^~~~~~~~~~~~~~~
tls.c:477:21: warning: 'RSA_set_method' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  477 |                     RSA_set_method(rsa, rsa_method) == 0) {
      |                     ^~~~~~~~~~~~~~
/usr/include/openssl/rsa.h:313:27: note: declared here
  313 | OSSL_DEPRECATEDIN_3_0 int RSA_set_method(RSA *rsa, const RSA_METHOD *meth);
      |                           ^~~~~~~~~~~~~~
tls.c:483:17: warning: 'EVP_PKEY_get1_EC_KEY' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  483 |                 if ((eckey = EVP_PKEY_get1_EC_KEY(pkey)) == NULL ||
      |                 ^~
/usr/include/openssl/evp.h:1433:19: note: declared here
 1433 | struct ec_key_st *EVP_PKEY_get1_EC_KEY(EVP_PKEY *pkey);
      |                   ^~~~~~~~~~~~~~~~~~~~
tls.c:484:21: warning: 'EC_KEY_set_ex_data' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  484 |                     EC_KEY_set_ex_data(eckey, 0, keypair->pubkey_hash) == 0) {
      |                     ^~~~~~~~~~~~~~~~~~
In file included from /usr/include/openssl/x509.h:33:
/usr/include/openssl/ec.h:1102:27: note: declared here
 1102 | OSSL_DEPRECATEDIN_3_0 int EC_KEY_set_ex_data(EC_KEY *key, int idx, void *arg);
      |                           ^~~~~~~~~~~~~~~~~~
tls.c:491:21: warning: 'EC_KEY_set_ex_data' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  491 |                     EC_KEY_set_ex_data(eckey, 1, ctx->config) == 0 ||
      |                     ^~~~~~~~~~~~~~~~~~
/usr/include/openssl/ec.h:1102:27: note: declared here
 1102 | OSSL_DEPRECATEDIN_3_0 int EC_KEY_set_ex_data(EC_KEY *key, int idx, void *arg);
      |                           ^~~~~~~~~~~~~~~~~~
tls.c:492:21: warning: 'EC_KEY_set_method' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  492 |                     EC_KEY_set_method(eckey, ecdsa_method) == 0) {
      |                     ^~~~~~~~~~~~~~~~~
/usr/include/openssl/ec.h:1302:27: note: declared here
 1302 | OSSL_DEPRECATEDIN_3_0 int EC_KEY_set_method(EC_KEY *key, const EC_KEY_METHOD *meth);
      |                           ^~~~~~~~~~~~~~~~~
tls.c:505:9: warning: 'RSA_free' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  505 |         RSA_free(rsa);
      |         ^~~~~~~~
/usr/include/openssl/rsa.h:304:28: note: declared here
  304 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
      |                            ^~~~~~~~
tls.c:506:9: warning: 'EC_KEY_free' is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations]
  506 |         EC_KEY_free(eckey);
      |         ^~~~~~~~~~~
/usr/include/openssl/ec.h:1022:28: note: declared here
 1022 | OSSL_DEPRECATEDIN_3_0 void EC_KEY_free(EC_KEY *key);
      |                            ^~~~~~~~~~~
  CCLD     libcompat.la
ar: `u' modifier ignored since `D' is the default (see `U')
  CCLD     libtls.la
ar: `u' modifier ignored since `D' is the default (see `U')
make[1]: Leaving directory '/tmp/src/libretls-3.7.0'
+ pkgconf --cflags --libs openssl
+ gcc -o test_program /tmp/src/test_program.c -I/tmp/src/libretls-3.7.0/include -L/tmp/src/libretls-3.7.0/.libs -ltls -lssl -lcrypto
+ LD_LIBRARY_PATH=/tmp/src/libretls-3.7.0/.libs ./test_program
+ set +x
>>> libretls: Entering fakeroot...
Making install in include
make[1]: Entering directory '/tmp/src/libretls-3.7.0/include'
make[2]: Entering directory '/tmp/src/libretls-3.7.0/include'
make[2]: Nothing to be done for 'install-exec-am'.
 /bin/mkdir -p '/tmp/pkg/libretls/usr/include'
 /usr/bin/install -c -m 644 tls.h '/tmp/pkg/libretls/usr/include'
make[2]: Leaving directory '/tmp/src/libretls-3.7.0/include'
make[1]: Leaving directory '/tmp/src/libretls-3.7.0/include'
Making install in man
make[1]: Entering directory '/tmp/src/libretls-3.7.0/man'
make[2]: Entering directory '/tmp/src/libretls-3.7.0/man'
make[2]: Nothing to be done for 'install-exec-am'.
 /bin/mkdir -p '/tmp/pkg/libretls/usr/share/man/man3'
 /usr/bin/install -c -m 644 tls_accept_socket.3 tls_client.3 tls_config_ocsp_require_stapling.3 tls_config_set_protocols.3 tls_config_set_session_id.3 tls_config_verify.3 tls_conn_version.3 tls_connect.3 tls_init.3 tls_load_file.3 tls_ocsp_process_response.3 tls_read.3 '/tmp/pkg/libretls/usr/share/man/man3'
make  install-data-hook
make[3]: Entering directory '/tmp/src/libretls-3.7.0/man'
ln -sf "tls_accept_socket.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_accept_cbs.3"
ln -sf "tls_accept_socket.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_accept_fds.3"
ln -sf "tls_client.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_configure.3"
ln -sf "tls_client.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_free.3"
ln -sf "tls_client.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_reset.3"
ln -sf "tls_client.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_server.3"
ln -sf "tls_config_set_protocols.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_parse_protocols.3"
ln -sf "tls_config_set_protocols.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_prefer_ciphers_client.3"
ln -sf "tls_config_set_protocols.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_prefer_ciphers_server.3"
ln -sf "tls_config_set_protocols.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_alpn.3"
ln -sf "tls_config_set_protocols.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_ciphers.3"
ln -sf "tls_config_set_protocols.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_dheparams.3"
ln -sf "tls_config_set_protocols.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_ecdhecurves.3"
ln -sf "tls_config_set_session_id.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_add_ticket_key.3"
ln -sf "tls_config_set_session_id.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_session_fd.3"
ln -sf "tls_config_set_session_id.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_session_lifetime.3"
ln -sf "tls_config_verify.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_insecure_noverifycert.3"
ln -sf "tls_config_verify.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_insecure_noverifyname.3"
ln -sf "tls_config_verify.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_insecure_noverifytime.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_conn_alpn_selected.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_conn_cipher.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_conn_cipher_strength.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_conn_servername.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_conn_session_resumed.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_cert_chain_pem.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_cert_contains_name.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_cert_hash.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_cert_issuer.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_cert_notafter.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_cert_notbefore.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_cert_provided.3"
ln -sf "tls_conn_version.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_cert_subject.3"
ln -sf "tls_connect.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_connect_cbs.3"
ln -sf "tls_connect.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_connect_fds.3"
ln -sf "tls_connect.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_connect_servername.3"
ln -sf "tls_connect.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_connect_socket.3"
ln -sf "tls_init.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_error.3"
ln -sf "tls_init.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_free.3"
ln -sf "tls_init.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_new.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_add_keypair_file.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_add_keypair_mem.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_add_keypair_ocsp_file.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_add_keypair_ocsp_mem.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_clear_keys.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_ca_file.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_ca_mem.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_ca_path.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_cert_file.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_cert_mem.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_crl_file.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_crl_mem.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_key_file.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_key_mem.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_keypair_file.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_keypair_mem.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_keypair_ocsp_file.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_keypair_ocsp_mem.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_ocsp_staple_file.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_ocsp_staple_mem.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_set_verify_depth.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_verify_client.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_config_verify_client_optional.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_default_ca_cert_file.3"
ln -sf "tls_load_file.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_unload_file.3"
ln -sf "tls_ocsp_process_response.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_ocsp_cert_status.3"
ln -sf "tls_ocsp_process_response.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_ocsp_crl_reason.3"
ln -sf "tls_ocsp_process_response.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_ocsp_next_update.3"
ln -sf "tls_ocsp_process_response.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_ocsp_response_status.3"
ln -sf "tls_ocsp_process_response.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_ocsp_result.3"
ln -sf "tls_ocsp_process_response.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_ocsp_revocation_time.3"
ln -sf "tls_ocsp_process_response.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_ocsp_this_update.3"
ln -sf "tls_ocsp_process_response.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_peer_ocsp_url.3"
ln -sf "tls_read.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_close.3"
ln -sf "tls_read.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_error.3"
ln -sf "tls_read.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_handshake.3"
ln -sf "tls_read.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_reset.3"
ln -sf "tls_read.3" "/tmp/pkg/libretls/usr/share/man/man3/tls_write.3"
make[3]: Leaving directory '/tmp/src/libretls-3.7.0/man'
make[2]: Leaving directory '/tmp/src/libretls-3.7.0/man'
make[1]: Leaving directory '/tmp/src/libretls-3.7.0/man'
make[1]: Entering directory '/tmp/src/libretls-3.7.0'
make[2]: Entering directory '/tmp/src/libretls-3.7.0'
 /bin/mkdir -p '/tmp/pkg/libretls/usr/lib'
 /bin/mkdir -p '/tmp/pkg/libretls/usr/lib/pkgconfig'
 /bin/sh ./libtool   --mode=install /usr/bin/install -c   libtls.la '/tmp/pkg/libretls/usr/lib'
 /usr/bin/install -c -m 644 libtls.pc '/tmp/pkg/libretls/usr/lib/pkgconfig'
libtool: install: /usr/bin/install -c .libs/libtls.so.8.0.1 /tmp/pkg/libretls/usr/lib/libtls.so.8.0.1
libtool: install: (cd /tmp/pkg/libretls/usr/lib && { ln -s -f libtls.so.8.0.1 libtls.so.8 || { rm -f libtls.so.8 && ln -s libtls.so.8.0.1 libtls.so.8; }; })
libtool: install: (cd /tmp/pkg/libretls/usr/lib && { ln -s -f libtls.so.8.0.1 libtls.so || { rm -f libtls.so && ln -s libtls.so.8.0.1 libtls.so; }; })
libtool: install: /usr/bin/install -c .libs/libtls.lai /tmp/pkg/libretls/usr/lib/libtls.la
libtool: install: /usr/bin/install -c .libs/libtls.a /tmp/pkg/libretls/usr/lib/libtls.a
libtool: install: chmod 644 /tmp/pkg/libretls/usr/lib/libtls.a
libtool: install: ranlib /tmp/pkg/libretls/usr/lib/libtls.a
libtool: warning: remember to run 'libtool --finish /usr/lib'
make[2]: Leaving directory '/tmp/src/libretls-3.7.0'
make[1]: Leaving directory '/tmp/src/libretls-3.7.0'
>>> libretls-doc*: Running split function doc...
'usr/share/man' -> '/tmp/pkg/libretls-doc/usr/share/man'
>>> libretls-doc*: Preparing subpackage libretls-doc...
>>> libretls-doc*: Running postcheck for libretls-doc
>>> libretls-static*: Running split function static...
'usr/lib/libtls.a' -> '/tmp/pkg/libretls-static/usr/lib/libtls.a'
>>> libretls-static*: Preparing subpackage libretls-static...
>>> libretls-static*: Stripping binaries
>>> libretls-static*: Running postcheck for libretls-static
>>> libretls-dev*: Running split function dev...
'usr/include' -> '/tmp/pkg/libretls-dev/usr/include'
'usr/lib/pkgconfig' -> '/tmp/pkg/libretls-dev/usr/lib/pkgconfig'
'usr/lib/libtls.so' -> '/tmp/pkg/libretls-dev/usr/lib/libtls.so'
>>> libretls-dev*: Preparing subpackage libretls-dev...
>>> libretls-dev*: Stripping binaries
>>> libretls-dev*: Running postcheck for libretls-dev
>>> libretls*: Running postcheck for libretls
>>> libretls*: Preparing package libretls...
>>> libretls*: Stripping binaries
>>> libretls-dev*: Scanning shared objects
>>> libretls-doc*: Scanning shared objects
>>> libretls-static*: Scanning shared objects
>>> libretls*: Scanning shared objects
>>> libretls-dev*: Tracing dependencies...
	openssl-dev>3
	libretls=3.7.0-r2
	pkgconfig
>>> libretls-dev*: Package size: 9.5 KB
>>> libretls-dev*: Compressing data...
>>> libretls-dev*: Create checksum...
>>> libretls-dev*: Create libretls-dev-3.7.0-r2.apk
>>> libretls-doc*: Tracing dependencies...
>>> libretls-doc*: Package size: 20.2 KB
>>> libretls-doc*: Compressing data...
>>> libretls-doc*: Create checksum...
>>> libretls-doc*: Create libretls-doc-3.7.0-r2.apk
>>> libretls-static*: Tracing dependencies...
>>> libretls-static*: Package size: 126.4 KB
>>> libretls-static*: Compressing data...
>>> libretls-static*: Create checksum...
>>> libretls-static*: Create libretls-static-3.7.0-r2.apk
>>> libretls*: Tracing dependencies...
	ca-certificates-bundle
	so:libc.musl-x86_64.so.1
	so:libcrypto.so.3
	so:libssl.so.3
>>> libretls*: Package size: 69.8 KB
>>> libretls*: Compressing data...
>>> libretls*: Create checksum...
>>> libretls*: Create libretls-3.7.0-r2.apk
>>> libretls: Updating the main/x86_64 repository index...
>>> libretls: Signing the index...
>>> libretls: Cleaning up srcdir
>>> libretls: Cleaning up build chroot
>>> libretls: Cleaning up pkgdir
