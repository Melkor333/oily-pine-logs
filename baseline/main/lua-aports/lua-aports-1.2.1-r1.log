>>> lua-aports: Validating /home/packager/oily-pine/main/lua-aports/APKBUILD...
>>> lua-aports: Cleaning up srcdir
>>> lua-aports: Cleaning up pkgdir
>>> lua-aports: Cleaning up tmpdir
>>> lua-aports: Fetching lua-aports-1.2.1.tar.gz::https://gitlab.alpinelinux.org/alpine/lua-aports/-/archive/1.2.1/lua-aports-1.2.1.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100 11940    0 11940    0     0  24354      0 --:--:-- --:--:-- --:--:-- 24317
>>> lua-aports: Fetching lua-aports-1.2.1.tar.gz::https://gitlab.alpinelinux.org/alpine/lua-aports/-/archive/1.2.1/lua-aports-1.2.1.tar.gz
>>> lua-aports: Checking sha512sums...
lua-aports-1.2.1.tar.gz: OK
>>> lua-aports: Preparing build chroot...
fetch http://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz
(1/88) Installing musl (1.2.5-r10)
(2/88) Installing libcrypto3 (3.5.0-r0)
(3/88) Installing ca-certificates-bundle (20241121-r2)
(4/88) Installing libssl3 (3.5.0-r0)
(5/88) Installing zlib (1.3.1-r2)
(6/88) Installing libapk2 (2.14.9-r2)
(7/88) Installing apk-tools (2.14.9-r2)
(8/88) Installing libcap2 (2.76-r0)
(9/88) Installing libcap-getcap (2.76-r0)
(10/88) Installing fakeroot (1.37.1.1-r0)
(11/88) Installing scanelf (1.3.8-r1)
(12/88) Installing musl-utils (1.2.5-r10)
(13/88) Installing libgcc (14.3.0-r0)
(14/88) Installing libstdc++ (14.3.0-r0)
(15/88) Installing lzip (1.25-r0)
(16/88) Installing openssl (3.5.0-r0)
(17/88) Installing patch (2.8-r0)
(18/88) Installing pkgconf (2.4.3-r0)
(19/88) Installing acl-libs (2.3.2-r1)
(20/88) Installing tar (1.35-r3)
(21/88) Installing busybox (1.37.0-r18)
Executing busybox-1.37.0-r18.post-install
(22/88) Installing ssl_client (1.37.0-r18)
(23/88) Installing busybox-binsh (1.37.0-r18)
(24/88) Installing abuild (3.15.0-r0)
Executing abuild-3.15.0-r0.pre-install
(25/88) Installing abuild-sudo (3.15.0-r0)
(26/88) Installing alpine-baselayout-data (3.7.0-r0)
(27/88) Installing alpine-baselayout (3.7.0-r0)
Executing alpine-baselayout-3.7.0-r0.pre-install
Executing alpine-baselayout-3.7.0-r0.post-install
(28/88) Installing bridge (1.5-r5)
(29/88) Installing ifupdown-ng (0.12.1-r7)
(30/88) Installing openrc-user (0.62.2-r2)
(31/88) Installing openrc (0.62.2-r2)
Executing openrc-0.62.2-r2.post-install
(32/88) Installing mdev-conf (4.8-r0)
(33/88) Installing busybox-mdev-openrc (1.37.0-r18)
(34/88) Installing alpine-conf (3.20.0-r0)
(35/88) Installing alpine-keys (2.5-r0)
(36/88) Installing alpine-release (3.22.0-r0)
(37/88) Installing busybox-openrc (1.37.0-r18)
(38/88) Installing busybox-suid (1.37.0-r18)
(39/88) Installing alpine-base (3.22.0-r0)
(40/88) Installing jansson (2.14.1-r0)
(41/88) Installing zstd-libs (1.5.7-r0)
(42/88) Installing binutils (2.44-r0)
(43/88) Installing libmagic (5.46-r2)
(44/88) Installing file (5.46-r2)
(45/88) Installing libgomp (14.3.0-r0)
(46/88) Installing libatomic (14.3.0-r0)
(47/88) Installing gmp (6.3.0-r3)
(48/88) Installing isl26 (0.26-r1)
(49/88) Installing mpfr4 (4.2.1_p1-r0)
(50/88) Installing mpc1 (1.3.1-r1)
(51/88) Installing gcc (14.3.0-r0)
(52/88) Installing libstdc++-dev (14.3.0-r0)
(53/88) Installing musl-dev (1.2.5-r10)
(54/88) Installing g++ (14.3.0-r0)
(55/88) Installing make (4.4.1-r3)
(56/88) Installing fortify-headers (1.1-r5)
(57/88) Installing build-base (0.5-r3)
(58/88) Installing brotli-libs (1.1.0-r2)
(59/88) Installing c-ares (1.34.5-r0)
(60/88) Installing libunistring (1.3-r0)
(61/88) Installing libidn2 (2.3.7-r0)
(62/88) Installing nghttp2-libs (1.65.0-r0)
(63/88) Installing libpsl (0.21.5-r3)
(64/88) Installing libcurl (8.14.0-r2)
(65/88) Installing libexpat (2.7.1-r0)
(66/88) Installing pcre2 (10.43-r1)
(67/88) Installing git (2.49.0-r0)
(68/88) Installing git-init-template (2.49.0-r0)
(69/88) Installing lua5.4-libs (5.4.7-r0)
(70/88) Installing ncurses-terminfo-base (6.5_p20250503-r0)
(71/88) Installing libncursesw (6.5_p20250503-r0)
(72/88) Installing readline (8.2.13-r1)
(73/88) Installing lua5.4 (5.4.7-r0)
(74/88) Installing lua5.4-cjson (2.1.0-r11)
(75/88) Installing lua-cliargs (3.0.2-r0)
(76/88) Installing lua5.4-say (1.4.1-r0)
(77/88) Installing lua5.4-luassert (1.9.0-r0)
(78/88) Installing lua5.4-mediator (1.1.2-r2)
(79/88) Installing lua5.4-filesystem (1.8.0-r4)
(80/88) Installing lua-filesystem (1.8.0-r4)
(81/88) Installing lua-penlight (1.14.0-r0)
(82/88) Installing lua5.4-penlight (1.14.0-r0)
(83/88) Installing lua5.4-system (0.4.5-r0)
(84/88) Installing lua5.4-term (0.07-r2)
(85/88) Installing lua5.4-busted (2.2.0-r0)
(86/88) Installing lua5.4-optarg (0.4-r0)
(87/88) Installing lua5.4-bit32 (5.3.0-r6)
(88/88) Installing lua5.4-posix (36.3-r0)
Executing busybox-1.37.0-r18.trigger
OK: 263 MiB in 88 packages
>>> lua-aports: Fetching lua-aports-1.2.1.tar.gz::https://gitlab.alpinelinux.org/alpine/lua-aports/-/archive/1.2.1/lua-aports-1.2.1.tar.gz
>>> lua-aports: Checking sha512sums...
lua-aports-1.2.1.tar.gz: OK
>>> lua-aports: Unpacking /var/cache/distfiles/lua-aports-1.2.1.tar.gz...
[==========] Running tests from scanned files.
[----------] Global test environment setup.
[----------] Running tests from spec/abuild_spec.lua
[ RUN      ] spec/abuild_spec.lua:36: abuild get_conf should return the value of a configuration variable from the user config
[       OK ] spec/abuild_spec.lua:36: abuild get_conf should return the value of a configuration variable from the user config (4.33 ms)
[ RUN      ] spec/abuild_spec.lua:43: abuild get_arch should return the CARCH value from the environment
[       OK ] spec/abuild_spec.lua:43: abuild get_arch should return the CARCH value from the environment (0.03 ms)
[ RUN      ] spec/abuild_spec.lua:49: abuild get_arch should return the CARCH value from user config
[       OK ] spec/abuild_spec.lua:49: abuild get_arch should return the CARCH value from user config (0.03 ms)
[ RUN      ] spec/abuild_spec.lua:57: abuild get_libc should return the libc value from the user config
[       OK ] spec/abuild_spec.lua:57: abuild get_libc should return the libc value from the user config (0.04 ms)
[ RUN      ] spec/abuild_spec.lua:65: abuild abuild.repodest should contain the REPODEST value from the user config
[       OK ] spec/abuild_spec.lua:65: abuild abuild.repodest should contain the REPODEST value from the user config (0.02 ms)
[ RUN      ] spec/abuild_spec.lua:72: abuild abuild.chost should contain the CHOST value from the user config
[       OK ] spec/abuild_spec.lua:72: abuild abuild.chost should contain the CHOST value from the user config (0.02 ms)
[----------] 6 tests from spec/abuild_spec.lua (47.43 ms total)

[----------] Running tests from spec/db_spec.lua
[ RUN      ] spec/db_spec.lua:66: db new should initialize the APK database correctly
[       OK ] spec/db_spec.lua:66: db new should initialize the APK database correctly (28.62 ms)
[ RUN      ] spec/db_spec.lua:81: db target_packages should list all target packages
[       OK ] spec/db_spec.lua:81: db target_packages should list all target packages (5.44 ms)
[ RUN      ] spec/db_spec.lua:96: db recursive_dependencies should list all dependencies in correct order
[       OK ] spec/db_spec.lua:96: db recursive_dependencies should list all dependencies in correct order (5.77 ms)
[ RUN      ] spec/db_spec.lua:118: db recursive_reverse_dependencies should list all reverse dependencies in correct order
[       OK ] spec/db_spec.lua:118: db recursive_reverse_dependencies should list all reverse dependencies in correct order (5.49 ms)
[ RUN      ] spec/db_spec.lua:137: db each_name should list all apk names and its origin
[       OK ] spec/db_spec.lua:137: db each_name should list all apk names and its origin (4.38 ms)
[ RUN      ] spec/db_spec.lua:155: db each_known_dependency should list all known dependencies
[       OK ] spec/db_spec.lua:155: db each_known_dependency should list all known dependencies (4.81 ms)
[ RUN      ] spec/db_spec.lua:169: db each_known_dependency should list a provides as a known dependencies
[       OK ] spec/db_spec.lua:169: db each_known_dependency should list a provides as a known dependencies (5.72 ms)
[ RUN      ] spec/db_spec.lua:186: db each_aport should list all apk names and its origin
[       OK ] spec/db_spec.lua:186: db each_aport should list all apk names and its origin (4.57 ms)
[ RUN      ] spec/db_spec.lua:203: db each_pkg_with_name should only list the origin(s) for the given package names
[       OK ] spec/db_spec.lua:203: db each_pkg_with_name should only list the origin(s) for the given package names (5.18 ms)
[ RUN      ] spec/db_spec.lua:221: db each_provider_for should list the providing origins for the given package names
[       OK ] spec/db_spec.lua:221: db each_provider_for should list the providing origins for the given package names (5.66 ms)
[ RUN      ] spec/db_spec.lua:239: db each_need_build should list all aports that don't have built apk file
[       OK ] spec/db_spec.lua:239: db each_need_build should list all aports that don't have built apk file (5.05 ms)
[ RUN      ] spec/db_spec.lua:270: db each_in_build_order should list the specified aports in build order
[       OK ] spec/db_spec.lua:270: db each_in_build_order should list the specified aports in build order (5.48 ms)
[ RUN      ] spec/db_spec.lua:278: db each_in_build_order should not include other provides when deternmining build order
[       OK ] spec/db_spec.lua:278: db each_in_build_order should not include other provides when deternmining build order (5.52 ms)
[ RUN      ] spec/db_spec.lua:286: db each_in_build_order should build docs last
[       OK ] spec/db_spec.lua:286: db each_in_build_order should build docs last (5.00 ms)
[ RUN      ] spec/db_spec.lua:297: db known_deps_exists should return true
[       OK ] spec/db_spec.lua:297: db known_deps_exists should return true (5.69 ms)
[----------] 15 tests from spec/db_spec.lua (154.79 ms total)

[----------] Running tests from spec/pkg_spec.lua
[ RUN      ] spec/pkg_spec.lua:40: aports.pkg is_remote should return true for remote URLs
[       OK ] spec/pkg_spec.lua:40: aports.pkg is_remote should return true for remote URLs (0.06 ms)
[ RUN      ] spec/pkg_spec.lua:48: aports.pkg should return false for non-remote URLs
[       OK ] spec/pkg_spec.lua:48: aports.pkg should return false for non-remote URLs (0.04 ms)
[ RUN      ] spec/pkg_spec.lua:55: aports.pkg remote_sources should iterate over remote sources
[       OK ] spec/pkg_spec.lua:55: aports.pkg remote_sources should iterate over remote sources (0.04 ms)
[ RUN      ] spec/pkg_spec.lua:74: aports.pkg remote_sources should return nil if source is not a table
[       OK ] spec/pkg_spec.lua:74: aports.pkg remote_sources should return nil if source is not a table (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:86: aports.pkg get_maintainer should return the maintainer
[       OK ] spec/pkg_spec.lua:86: aports.pkg get_maintainer should return the maintainer (0.06 ms)
[ RUN      ] spec/pkg_spec.lua:97: aports.pkg get_repo_name should return the repository name when it exists
[       OK ] spec/pkg_spec.lua:97: aports.pkg get_repo_name should return the repository name when it exists (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:101: aports.pkg get_repo_name should return nil when package directory is not provided
[       OK ] spec/pkg_spec.lua:101: aports.pkg get_repo_name should return nil when package directory is not provided (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:107: aports.pkg get_apk_file_name should return the correct apk file name
[       OK ] spec/pkg_spec.lua:107: aports.pkg get_apk_file_name should return the correct apk file name (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:120: aports.pkg get_apk_file_path should return the correct apk file path
[       OK ] spec/pkg_spec.lua:120: aports.pkg get_apk_file_path should return the correct apk file path (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:134: aports.pkg apk_file_exists should return false when the apk file does not exist
[       OK ] spec/pkg_spec.lua:134: aports.pkg apk_file_exists should return false when the apk file does not exist (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:143: aports.pkg apk_file_exists should return true when the apk file exists
[       OK ] spec/pkg_spec.lua:143: aports.pkg apk_file_exists should return true when the apk file exists (0.07 ms)
[ RUN      ] spec/pkg_spec.lua:168: aports.pkg all_apks_exists should return false when any apk file does not exist
[       OK ] spec/pkg_spec.lua:168: aports.pkg all_apks_exists should return false when any apk file does not exist (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:180: aports.pkg all_apks_exists should return true when all apk files exist
[       OK ] spec/pkg_spec.lua:180: aports.pkg all_apks_exists should return true when all apk files exist (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:190: aports.pkg arch_enabled should return true when arch is enabled for the package
[       OK ] spec/pkg_spec.lua:190: aports.pkg arch_enabled should return true when arch is enabled for the package (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:194: aports.pkg arch_enabled should return true when all arches are enabled for the package
[       OK ] spec/pkg_spec.lua:194: aports.pkg arch_enabled should return true when all arches are enabled for the package (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:198: aports.pkg arch_enabled should return true for noarch packages
[       OK ] spec/pkg_spec.lua:198: aports.pkg arch_enabled should return true for noarch packages (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:202: aports.pkg arch_enabled should return falsy when arch is empty for the package
[       OK ] spec/pkg_spec.lua:202: aports.pkg arch_enabled should return falsy when arch is empty for the package (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:206: aports.pkg arch_enabled should return false when arch is disabled for the package
[       OK ] spec/pkg_spec.lua:206: aports.pkg arch_enabled should return false when arch is disabled for the package (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:210: aports.pkg arch_enabled should return false when arch is disabled for a noarch package
[       OK ] spec/pkg_spec.lua:210: aports.pkg arch_enabled should return false when arch is disabled for a noarch package (0.02 ms)
[ RUN      ] spec/pkg_spec.lua:216: aports.pkg each_dependency should yield dependencies from 'depends' field
[       OK ] spec/pkg_spec.lua:216: aports.pkg each_dependency should yield dependencies from 'depends' field (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:236: aports.pkg each_dependency should yield dependencies from 'makedepends' field
[       OK ] spec/pkg_spec.lua:236: aports.pkg each_dependency should yield dependencies from 'makedepends' field (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:256: aports.pkg each_dependency should yield dependencies from 'checkdepends' field when options['!check'] is falsy
[       OK ] spec/pkg_spec.lua:256: aports.pkg each_dependency should yield dependencies from 'checkdepends' field when options['!check'] is falsy (0.03 ms)
[ RUN      ] spec/pkg_spec.lua:276: aports.pkg each_dependency should not yield dependencies from 'checkdepends' field when options['!check'] is truthy
[       OK ] spec/pkg_spec.lua:276: aports.pkg each_dependency should not yield dependencies from 'checkdepends' field when options['!check'] is truthy (0.02 ms)
[----------] 23 tests from spec/pkg_spec.lua (79.04 ms total)

[----------] Global test environment teardown.
[==========] 44 tests from 3 test files ran. (281.44 ms total)
[  PASSED  ] 44 tests.
>>> lua-aports: Entering fakeroot...
install -d /tmp/pkg/lua-aports/usr/share/lua/5.4/aports \
	/tmp/pkg/lua-aports/usr/bin
install -m644 aports/abuild.lua aports/apkrepo.lua aports/db.lua aports/dump.lua aports/pkg.lua \
	/tmp/pkg/lua-aports/usr/share/lua/5.4/aports/
for file in buildrepo.lua ap.lua; do \
	install -m755 bin/$file /tmp/pkg/lua-aports/usr/bin/${file%.lua} || exit 1; \
done
>>> lua-aports*: Running postcheck for lua-aports
>>> lua-aports*: Preparing package lua-aports...
>>> lua-aports*: Tracing dependencies...
	abuild
	lua5.4-cjson
	lua5.4-filesystem
	lua5.4-optarg
	lua5.4
>>> lua-aports*: Package size: 25.2 KB
>>> lua-aports*: Compressing data...
>>> lua-aports*: Create checksum...
>>> lua-aports*: Create lua-aports-1.2.1-r1.apk
>>> lua-aports: Updating the main/x86_64 repository index...
>>> lua-aports: Signing the index...
>>> lua-aports: Cleaning up srcdir
>>> lua-aports: Cleaning up build chroot
>>> lua-aports: Cleaning up pkgdir
