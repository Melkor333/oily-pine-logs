pigz: not found
>>> lua-discount: Building main/lua-discount 1.2.10.1-r8 (using abuild 3.14.1-r4) started Fri, 23 May 2025 00:50:56 +0000
>>> lua-discount: Validating /home/packager/aports/main/lua-discount/APKBUILD...
>>> lua-discount: Analyzing dependencies...
>>> lua-discount: Installing for build: build-base lua5.1-dev lua5.2-dev lua5.3-dev lua5.4-dev
(1/12) Installing lua5.1-libs (5.1.5-r13)
(2/12) Installing lua5.1 (5.1.5-r13)
(3/12) Installing lua5.1-dev (5.1.5-r13)
(4/12) Installing lua5.2-libs (5.2.4-r13)
(5/12) Installing lua5.2 (5.2.4-r13)
(6/12) Installing lua5.2-dev (5.2.4-r13)
(7/12) Installing linenoise (1.0-r5)
(8/12) Installing lua5.3-libs (5.3.6-r6)
(9/12) Installing lua5.3 (5.3.6-r6)
(10/12) Installing lua5.3-dev (5.3.6-r6)
(11/12) Installing lua5.4-dev (5.4.7-r0)
(12/12) Installing .makedepends-lua-discount (20250523.005058)
Executing busybox-1.37.0-r12.trigger
OK: 319 MiB in 126 packages
>>> lua-discount: Cleaning up srcdir
>>> lua-discount: Cleaning up pkgdir
>>> lua-discount: Cleaning up tmpdir
>>> lua-discount: Fetching https://dev.alpinelinux.org/archive/lua-discount/lua-discount-1.2.10.1.tar.gz
Connecting to dev.alpinelinux.org (185.15.220.34:443)
saving to '/var/cache/distfiles/lua-discount-1.2.10.1.tar.gz.part'
lua-discount-1.2.10. 100% |********************************| 23641  0:00:00 ETA
'/var/cache/distfiles/lua-discount-1.2.10.1.tar.gz.part' saved
>>> lua-discount: Fetching https://dev.alpinelinux.org/archive/lua-discount/lua-discount-1.2.10.1.tar.gz
>>> lua-discount: Checking sha512sums...
lua-discount-1.2.10.1.tar.gz: OK
>>> lua-discount: Unpacking /var/cache/distfiles/lua-discount-1.2.10.1.tar.gz...
gcc  -Wall -O2 -fPIC    -c -o docheader.o docheader.c
gcc  -Wall -O2 -fPIC    -c -o dumptree.o dumptree.c
gcc  -Wall -O2 -fPIC    -c -o generate.o generate.c
gcc  -Wall -O2 -fPIC    -c -o markdown.o markdown.c
gcc  -Wall -O2 -fPIC    -c -o mkdio.o mkdio.c
gcc  -Wall -O2 -fPIC    -c -o resource.o resource.c
gcc  -Wall -O2 -fPIC    -c -o ldiscount.o ldiscount.c
In file included from generate.c:16:
generate.c: In function 'push':
cstring.h:20:30: warning: operation on 'f->in.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:43:9: note: in expansion of macro 'EXPAND'
   43 |         EXPAND(f->in) = *bfr++;
      |         ^~~~~~
generate.c: In function 'Qchar':
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:101:16: note: in expansion of macro 'EXPAND'
  101 |         cur = &EXPAND(f->Q);
      |                ^~~~~~
cstring.h:20:30: warning: operation on 'cur->b_text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:108:5: note: in expansion of macro 'EXPAND'
  108 |     EXPAND(cur->b_text) = c;
      |     ^~~~~~
generate.c: In function 'Qem':
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:153:17: note: in expansion of macro 'EXPAND'
  153 |     block *p = &EXPAND(f->Q);
      |                 ^~~~~~
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:160:13: note: in expansion of macro 'EXPAND'
  160 |     memset(&EXPAND(f->Q), 0, sizeof(block));
      |             ^~~~~~
markdown.c: In function 'isopentag':
markdown.c:151:10: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
  151 |     if ( ret = bsearch(&key,blocktags,SZTAGS,sizeof key, (stfu)casort))
      |          ^~~
generate.c: In function 'emmatch':
cstring.h:20:30: warning: operation on 'start->b_text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:246:17: note: in expansion of macro 'EXPAND'
  246 |                 EXPAND(start->b_text) = start->b_char;
      |                 ^~~~~~
generate.c: In function 'reparse':
cstring.h:20:30: warning: operation on 'sub.in.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:289:5: note: in expansion of macro 'EXPAND'
  289 |     EXPAND(sub.in) = 0;
      |     ^~~~~~
In file included from markdown.h:4,
                 from dumptree.c:8:
dumptree.c: In function 'pushpfx':
cstring.h:20:30: warning: operation on 'sp->size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
dumptree.c:41:24: note: in expansion of macro 'EXPAND'
   41 |     struct frame *q = &EXPAND(*sp);
      |                        ^~~~~~
dumptree.c: In function 'mkd_dump':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
dumptree.c:138:9: note: in expansion of macro 'CREATE'
  138 |         CREATE(stack);
      |         ^~~~~~
markdown.c: In function 'listblock':
markdown.c:623:14: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
  623 |         if ( para = (q != text) ) {
      |              ^~~~
In file included from markdown.c:16:
markdown.c: In function 'addfootnote':
cstring.h:20:30: warning: operation on 'f->footnotes->size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:660:23: note: in expansion of macro 'EXPAND'
  660 |     Footnote *foot = &EXPAND(*f->footnotes);
      |                       ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:662:5: note: in expansion of macro 'CREATE'
  662 |     CREATE(foot->tag);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:663:5: note: in expansion of macro 'CREATE'
  663 |     CREATE(foot->link);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:664:5: note: in expansion of macro 'CREATE'
  664 |     CREATE(foot->title);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->tag.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:668:9: note: in expansion of macro 'EXPAND'
  668 |         EXPAND(foot->tag) = T(p->text)[j];
      |         ^~~~~~
cstring.h:20:30: warning: operation on 'foot->tag.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:670:5: note: in expansion of macro 'EXPAND'
  670 |     EXPAND(foot->tag) = 0;
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->link.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:675:9: note: in expansion of macro 'EXPAND'
  675 |         EXPAND(foot->link) = T(p->text)[j++];
      |         ^~~~~~
cstring.h:20:30: warning: operation on 'foot->link.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:676:5: note: in expansion of macro 'EXPAND'
  676 |     EXPAND(foot->link) = 0;
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->title.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:703:13: note: in expansion of macro 'EXPAND'
  703 |             EXPAND(foot->title) = T(p->text)[j++];
      |             ^~~~~~
cstring.h:20:30: warning: operation on 'foot->title.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:709:9: note: in expansion of macro 'EXPAND'
  709 |         EXPAND(foot->title) = 0;
      |         ^~~~~~
markdown.c: In function 'mkd_compile':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:856:5: note: in expansion of macro 'CREATE'
  856 |     CREATE(doc->ctx->in);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:858:5: note: in expansion of macro 'CREATE'
  858 |     CREATE(*doc->ctx->footnotes);
      |     ^~~~~~
In file included from mkdio.c:13:
mkdio.c: In function 'queue':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
mkdio.c:46:5: note: in expansion of macro 'CREATE'
   46 |     CREATE(p->text);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:57:17: note: in expansion of macro 'EXPAND'
   57 |                 EXPAND(p->text) = ' ';
      |                 ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:61:13: note: in expansion of macro 'EXPAND'
   61 |             EXPAND(p->text) = c;
      |             ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:65:5: note: in expansion of macro 'EXPAND'
   65 |     EXPAND(p->text) = 0;
      |     ^~~~~~
mkdio.c: In function 'populate':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
mkdio.c:101:5: note: in expansion of macro 'CREATE'
  101 |     CREATE(line);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'line.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:117:13: note: in expansion of macro 'EXPAND'
  117 |             EXPAND(line) = c;
      |             ^~~~~~
ldiscount.c: In function 'ldiscount':
ldiscount.c:110:20: warning: passing argument 1 of 'mkd_string' discards 'const' qualifier from pointer target type [-Wdiscarded-qualifiers]
  110 |   doc = mkd_string(str, len, MKD_TABSTOP|MKD_NOHEADER);
      |                    ^~~
In file included from ldiscount.c:7:
markdown.h:108:29: note: expected 'char *' but argument is of type 'const char *'
  108 | extern Document *mkd_string(char*,int, int);
      |                             ^~~~~
In file included from resource.c:16:
resource.c: In function '___mkd_initmmiot':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:82:9: note: in expansion of macro 'CREATE'
   82 |         CREATE(f->in);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:83:9: note: in expansion of macro 'CREATE'
   83 |         CREATE(f->out);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:84:9: note: in expansion of macro 'CREATE'
   84 |         CREATE(f->Q);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:89:13: note: in expansion of macro 'CREATE'
   89 |             CREATE(*f->footnotes);
      |             ^~~~~~
gcc -o discount.so -shared docheader.o dumptree.o generate.o markdown.o mkdio.o resource.o ldiscount.o 
/usr/lib/gcc/x86_64-alpine-linux-musl/14.2.0/../../../../x86_64-alpine-linux-musl/bin/ld: warning: discount.so has a LOAD segment with RWX permissions
gcc -I/usr/include/lua5.2 -Wall -O2 -fPIC    -c -o docheader.o docheader.c
gcc -I/usr/include/lua5.2 -Wall -O2 -fPIC    -c -o dumptree.o dumptree.c
gcc -I/usr/include/lua5.2 -Wall -O2 -fPIC    -c -o generate.o generate.c
gcc -I/usr/include/lua5.2 -Wall -O2 -fPIC    -c -o markdown.o markdown.c
gcc -I/usr/include/lua5.2 -Wall -O2 -fPIC    -c -o mkdio.o mkdio.c
gcc -I/usr/include/lua5.2 -Wall -O2 -fPIC    -c -o resource.o resource.c
gcc -I/usr/include/lua5.2 -Wall -O2 -fPIC    -c -o ldiscount.o ldiscount.c
In file included from markdown.h:4,
                 from dumptree.c:8:
dumptree.c: In function 'pushpfx':
cstring.h:20:30: warning: operation on 'sp->size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
dumptree.c:41:24: note: in expansion of macro 'EXPAND'
   41 |     struct frame *q = &EXPAND(*sp);
      |                        ^~~~~~
dumptree.c: In function 'mkd_dump':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
dumptree.c:138:9: note: in expansion of macro 'CREATE'
  138 |         CREATE(stack);
      |         ^~~~~~
ldiscount.c: In function 'ldiscount':
ldiscount.c:110:20: warning: passing argument 1 of 'mkd_string' discards 'const' qualifier from pointer target type [-Wdiscarded-qualifiers]
  110 |   doc = mkd_string(str, len, MKD_TABSTOP|MKD_NOHEADER);
      |                    ^~~
In file included from ldiscount.c:7:
markdown.h:108:29: note: expected 'char *' but argument is of type 'const char *'
  108 | extern Document *mkd_string(char*,int, int);
      |                             ^~~~~
In file included from resource.c:16:
resource.c: In function '___mkd_initmmiot':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:82:9: note: in expansion of macro 'CREATE'
   82 |         CREATE(f->in);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:83:9: note: in expansion of macro 'CREATE'
   83 |         CREATE(f->out);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:84:9: note: in expansion of macro 'CREATE'
   84 |         CREATE(f->Q);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:89:13: note: in expansion of macro 'CREATE'
   89 |             CREATE(*f->footnotes);
      |             ^~~~~~
In file included from generate.c:16:
generate.c: In function 'push':
markdown.c: In function 'isopentag':
markdown.c:151:10: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
  151 |     if ( ret = bsearch(&key,blocktags,SZTAGS,sizeof key, (stfu)casort))
      |          ^~~
cstring.h:20:30: warning: operation on 'f->in.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:43:9: note: in expansion of macro 'EXPAND'
   43 |         EXPAND(f->in) = *bfr++;
      |         ^~~~~~
generate.c: In function 'Qchar':
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:101:16: note: in expansion of macro 'EXPAND'
  101 |         cur = &EXPAND(f->Q);
      |                ^~~~~~
cstring.h:20:30: warning: operation on 'cur->b_text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:108:5: note: in expansion of macro 'EXPAND'
  108 |     EXPAND(cur->b_text) = c;
      |     ^~~~~~
generate.c: In function 'Qem':
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:153:17: note: in expansion of macro 'EXPAND'
  153 |     block *p = &EXPAND(f->Q);
      |                 ^~~~~~
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:160:13: note: in expansion of macro 'EXPAND'
  160 |     memset(&EXPAND(f->Q), 0, sizeof(block));
      |             ^~~~~~
generate.c: In function 'emmatch':
cstring.h:20:30: warning: operation on 'start->b_text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:246:17: note: in expansion of macro 'EXPAND'
  246 |                 EXPAND(start->b_text) = start->b_char;
      |                 ^~~~~~
In file included from mkdio.c:13:
mkdio.c: In function 'queue':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
mkdio.c:46:5: note: in expansion of macro 'CREATE'
   46 |     CREATE(p->text);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:57:17: note: in expansion of macro 'EXPAND'
   57 |                 EXPAND(p->text) = ' ';
      |                 ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:61:13: note: in expansion of macro 'EXPAND'
   61 |             EXPAND(p->text) = c;
      |             ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:65:5: note: in expansion of macro 'EXPAND'
   65 |     EXPAND(p->text) = 0;
      |     ^~~~~~
mkdio.c: In function 'populate':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
mkdio.c:101:5: note: in expansion of macro 'CREATE'
  101 |     CREATE(line);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'line.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:117:13: note: in expansion of macro 'EXPAND'
  117 |             EXPAND(line) = c;
      |             ^~~~~~
generate.c: In function 'reparse':
cstring.h:20:30: warning: operation on 'sub.in.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:289:5: note: in expansion of macro 'EXPAND'
  289 |     EXPAND(sub.in) = 0;
      |     ^~~~~~
markdown.c: In function 'listblock':
markdown.c:623:14: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
  623 |         if ( para = (q != text) ) {
      |              ^~~~
In file included from markdown.c:16:
markdown.c: In function 'addfootnote':
cstring.h:20:30: warning: operation on 'f->footnotes->size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:660:23: note: in expansion of macro 'EXPAND'
  660 |     Footnote *foot = &EXPAND(*f->footnotes);
      |                       ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:662:5: note: in expansion of macro 'CREATE'
  662 |     CREATE(foot->tag);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:663:5: note: in expansion of macro 'CREATE'
  663 |     CREATE(foot->link);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:664:5: note: in expansion of macro 'CREATE'
  664 |     CREATE(foot->title);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->tag.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:668:9: note: in expansion of macro 'EXPAND'
  668 |         EXPAND(foot->tag) = T(p->text)[j];
      |         ^~~~~~
cstring.h:20:30: warning: operation on 'foot->tag.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:670:5: note: in expansion of macro 'EXPAND'
  670 |     EXPAND(foot->tag) = 0;
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->link.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:675:9: note: in expansion of macro 'EXPAND'
  675 |         EXPAND(foot->link) = T(p->text)[j++];
      |         ^~~~~~
cstring.h:20:30: warning: operation on 'foot->link.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:676:5: note: in expansion of macro 'EXPAND'
  676 |     EXPAND(foot->link) = 0;
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->title.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:703:13: note: in expansion of macro 'EXPAND'
  703 |             EXPAND(foot->title) = T(p->text)[j++];
      |             ^~~~~~
cstring.h:20:30: warning: operation on 'foot->title.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:709:9: note: in expansion of macro 'EXPAND'
  709 |         EXPAND(foot->title) = 0;
      |         ^~~~~~
markdown.c: In function 'mkd_compile':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:856:5: note: in expansion of macro 'CREATE'
  856 |     CREATE(doc->ctx->in);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:858:5: note: in expansion of macro 'CREATE'
  858 |     CREATE(*doc->ctx->footnotes);
      |     ^~~~~~
gcc -o discount.so -shared docheader.o dumptree.o generate.o markdown.o mkdio.o resource.o ldiscount.o 
/usr/lib/gcc/x86_64-alpine-linux-musl/14.2.0/../../../../x86_64-alpine-linux-musl/bin/ld: warning: discount.so has a LOAD segment with RWX permissions
gcc -I/usr/include/lua5.3 -Wall -O2 -fPIC    -c -o docheader.o docheader.c
gcc -I/usr/include/lua5.3 -Wall -O2 -fPIC    -c -o dumptree.o dumptree.c
gcc -I/usr/include/lua5.3 -Wall -O2 -fPIC    -c -o generate.o generate.c
gcc -I/usr/include/lua5.3 -Wall -O2 -fPIC    -c -o markdown.o markdown.c
gcc -I/usr/include/lua5.3 -Wall -O2 -fPIC    -c -o mkdio.o mkdio.c
gcc -I/usr/include/lua5.3 -Wall -O2 -fPIC    -c -o resource.o resource.c
gcc -I/usr/include/lua5.3 -Wall -O2 -fPIC    -c -o ldiscount.o ldiscount.c
In file included from generate.c:16:
generate.c: In function 'push':
cstring.h:20:30: warning: operation on 'f->in.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:43:9: note: in expansion of macro 'EXPAND'
   43 |         EXPAND(f->in) = *bfr++;
      |         ^~~~~~
generate.c: In function 'Qchar':
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:101:16: note: in expansion of macro 'EXPAND'
  101 |         cur = &EXPAND(f->Q);
      |                ^~~~~~
cstring.h:20:30: warning: operation on 'cur->b_text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:108:5: note: in expansion of macro 'EXPAND'
  108 |     EXPAND(cur->b_text) = c;
      |     ^~~~~~
In file included from markdown.h:4,
                 from dumptree.c:8:
dumptree.c: In function 'pushpfx':
cstring.h:20:30: warning: operation on 'sp->size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
dumptree.c:41:24: note: in expansion of macro 'EXPAND'
   41 |     struct frame *q = &EXPAND(*sp);
      |                        ^~~~~~
dumptree.c: In function 'mkd_dump':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
dumptree.c:138:9: note: in expansion of macro 'CREATE'
  138 |         CREATE(stack);
      |         ^~~~~~
generate.c: In function 'Qem':
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:153:17: note: in expansion of macro 'EXPAND'
  153 |     block *p = &EXPAND(f->Q);
      |                 ^~~~~~
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:160:13: note: in expansion of macro 'EXPAND'
  160 |     memset(&EXPAND(f->Q), 0, sizeof(block));
      |             ^~~~~~
generate.c: In function 'emmatch':
In file included from mkdio.c:13:
mkdio.c: In function 'queue':
cstring.h:20:30: warning: operation on 'start->b_text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:246:17: note: in expansion of macro 'EXPAND'
  246 |                 EXPAND(start->b_text) = start->b_char;
      |                 ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
mkdio.c:46:5: note: in expansion of macro 'CREATE'
   46 |     CREATE(p->text);
      |     ^~~~~~
generate.c: In function 'reparse':
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:57:17: note: in expansion of macro 'EXPAND'
   57 |                 EXPAND(p->text) = ' ';
      |                 ^~~~~~
cstring.h:20:30: warning: operation on 'sub.in.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:289:5: note: in expansion of macro 'EXPAND'
  289 |     EXPAND(sub.in) = 0;
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:61:13: note: in expansion of macro 'EXPAND'
   61 |             EXPAND(p->text) = c;
      |             ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:65:5: note: in expansion of macro 'EXPAND'
   65 |     EXPAND(p->text) = 0;
      |     ^~~~~~
mkdio.c: In function 'populate':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
mkdio.c:101:5: note: in expansion of macro 'CREATE'
  101 |     CREATE(line);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'line.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:117:13: note: in expansion of macro 'EXPAND'
  117 |             EXPAND(line) = c;
      |             ^~~~~~
ldiscount.c: In function 'ldiscount':
ldiscount.c:110:20: warning: passing argument 1 of 'mkd_string' discards 'const' qualifier from pointer target type [-Wdiscarded-qualifiers]
  110 |   doc = mkd_string(str, len, MKD_TABSTOP|MKD_NOHEADER);
      |                    ^~~
In file included from ldiscount.c:7:
markdown.h:108:29: note: expected 'char *' but argument is of type 'const char *'
  108 | extern Document *mkd_string(char*,int, int);
      |                             ^~~~~
In file included from resource.c:16:
resource.c: In function '___mkd_initmmiot':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:82:9: note: in expansion of macro 'CREATE'
   82 |         CREATE(f->in);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:83:9: note: in expansion of macro 'CREATE'
   83 |         CREATE(f->out);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:84:9: note: in expansion of macro 'CREATE'
   84 |         CREATE(f->Q);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:89:13: note: in expansion of macro 'CREATE'
   89 |             CREATE(*f->footnotes);
      |             ^~~~~~
markdown.c: In function 'isopentag':
markdown.c:151:10: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
  151 |     if ( ret = bsearch(&key,blocktags,SZTAGS,sizeof key, (stfu)casort))
      |          ^~~
markdown.c: In function 'listblock':
markdown.c:623:14: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
  623 |         if ( para = (q != text) ) {
      |              ^~~~
In file included from markdown.c:16:
markdown.c: In function 'addfootnote':
cstring.h:20:30: warning: operation on 'f->footnotes->size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:660:23: note: in expansion of macro 'EXPAND'
  660 |     Footnote *foot = &EXPAND(*f->footnotes);
      |                       ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:662:5: note: in expansion of macro 'CREATE'
  662 |     CREATE(foot->tag);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:663:5: note: in expansion of macro 'CREATE'
  663 |     CREATE(foot->link);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:664:5: note: in expansion of macro 'CREATE'
  664 |     CREATE(foot->title);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->tag.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:668:9: note: in expansion of macro 'EXPAND'
  668 |         EXPAND(foot->tag) = T(p->text)[j];
      |         ^~~~~~
cstring.h:20:30: warning: operation on 'foot->tag.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:670:5: note: in expansion of macro 'EXPAND'
  670 |     EXPAND(foot->tag) = 0;
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->link.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:675:9: note: in expansion of macro 'EXPAND'
  675 |         EXPAND(foot->link) = T(p->text)[j++];
      |         ^~~~~~
cstring.h:20:30: warning: operation on 'foot->link.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:676:5: note: in expansion of macro 'EXPAND'
  676 |     EXPAND(foot->link) = 0;
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->title.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:703:13: note: in expansion of macro 'EXPAND'
  703 |             EXPAND(foot->title) = T(p->text)[j++];
      |             ^~~~~~
cstring.h:20:30: warning: operation on 'foot->title.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:709:9: note: in expansion of macro 'EXPAND'
  709 |         EXPAND(foot->title) = 0;
      |         ^~~~~~
markdown.c: In function 'mkd_compile':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:856:5: note: in expansion of macro 'CREATE'
  856 |     CREATE(doc->ctx->in);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:858:5: note: in expansion of macro 'CREATE'
  858 |     CREATE(*doc->ctx->footnotes);
      |     ^~~~~~
gcc -o discount.so -shared docheader.o dumptree.o generate.o markdown.o mkdio.o resource.o ldiscount.o 
/usr/lib/gcc/x86_64-alpine-linux-musl/14.2.0/../../../../x86_64-alpine-linux-musl/bin/ld: warning: discount.so has a LOAD segment with RWX permissions
gcc -I/usr/include/lua5.4 -Wall -O2 -fPIC    -c -o docheader.o docheader.c
gcc -I/usr/include/lua5.4 -Wall -O2 -fPIC    -c -o dumptree.o dumptree.c
gcc -I/usr/include/lua5.4 -Wall -O2 -fPIC    -c -o generate.o generate.c
gcc -I/usr/include/lua5.4 -Wall -O2 -fPIC    -c -o markdown.o markdown.c
gcc -I/usr/include/lua5.4 -Wall -O2 -fPIC    -c -o mkdio.o mkdio.c
gcc -I/usr/include/lua5.4 -Wall -O2 -fPIC    -c -o resource.o resource.c
gcc -I/usr/include/lua5.4 -Wall -O2 -fPIC    -c -o ldiscount.o ldiscount.c
In file included from markdown.h:4,
                 from dumptree.c:8:
dumptree.c: In function 'pushpfx':
cstring.h:20:30: warning: operation on 'sp->size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
dumptree.c:41:24: note: in expansion of macro 'EXPAND'
   41 |     struct frame *q = &EXPAND(*sp);
      |                        ^~~~~~
dumptree.c: In function 'mkd_dump':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
dumptree.c:138:9: note: in expansion of macro 'CREATE'
  138 |         CREATE(stack);
      |         ^~~~~~
markdown.c: In function 'isopentag':
markdown.c:151:10: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
  151 |     if ( ret = bsearch(&key,blocktags,SZTAGS,sizeof key, (stfu)casort))
      |          ^~~
In file included from resource.c:16:
resource.c: In function '___mkd_initmmiot':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:82:9: note: in expansion of macro 'CREATE'
   82 |         CREATE(f->in);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:83:9: note: in expansion of macro 'CREATE'
   83 |         CREATE(f->out);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:84:9: note: in expansion of macro 'CREATE'
   84 |         CREATE(f->Q);
      |         ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
resource.c:89:13: note: in expansion of macro 'CREATE'
   89 |             CREATE(*f->footnotes);
      |             ^~~~~~
In file included from mkdio.c:13:
mkdio.c: In function 'queue':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
mkdio.c:46:5: note: in expansion of macro 'CREATE'
   46 |     CREATE(p->text);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:57:17: note: in expansion of macro 'EXPAND'
   57 |                 EXPAND(p->text) = ' ';
      |                 ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:61:13: note: in expansion of macro 'EXPAND'
   61 |             EXPAND(p->text) = c;
      |             ^~~~~~
cstring.h:20:30: warning: operation on 'p->text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:65:5: note: in expansion of macro 'EXPAND'
   65 |     EXPAND(p->text) = 0;
      |     ^~~~~~
mkdio.c: In function 'populate':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
mkdio.c:101:5: note: in expansion of macro 'CREATE'
  101 |     CREATE(line);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'line.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
mkdio.c:117:13: note: in expansion of macro 'EXPAND'
  117 |             EXPAND(line) = c;
      |             ^~~~~~
markdown.c: In function 'listblock':
markdown.c:623:14: warning: suggest parentheses around assignment used as truth value [-Wparentheses]
  623 |         if ( para = (q != text) ) {
      |              ^~~~
In file included from markdown.c:16:
markdown.c: In function 'addfootnote':
cstring.h:20:30: warning: operation on 'f->footnotes->size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:660:23: note: in expansion of macro 'EXPAND'
  660 |     Footnote *foot = &EXPAND(*f->footnotes);
      |                       ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:662:5: note: in expansion of macro 'CREATE'
  662 |     CREATE(foot->tag);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:663:5: note: in expansion of macro 'CREATE'
  663 |     CREATE(foot->link);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:664:5: note: in expansion of macro 'CREATE'
  664 |     CREATE(foot->title);
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->tag.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:668:9: note: in expansion of macro 'EXPAND'
  668 |         EXPAND(foot->tag) = T(p->text)[j];
      |         ^~~~~~
cstring.h:20:30: warning: operation on 'foot->tag.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:670:5: note: in expansion of macro 'EXPAND'
  670 |     EXPAND(foot->tag) = 0;
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->link.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:675:9: note: in expansion of macro 'EXPAND'
  675 |         EXPAND(foot->link) = T(p->text)[j++];
      |         ^~~~~~
cstring.h:20:30: warning: operation on 'foot->link.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:676:5: note: in expansion of macro 'EXPAND'
  676 |     EXPAND(foot->link) = 0;
      |     ^~~~~~
cstring.h:20:30: warning: operation on 'foot->title.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:703:13: note: in expansion of macro 'EXPAND'
  703 |             EXPAND(foot->title) = T(p->text)[j++];
      |             ^~~~~~
cstring.h:20:30: warning: operation on 'foot->title.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
markdown.c:709:9: note: in expansion of macro 'EXPAND'
  709 |         EXPAND(foot->title) = 0;
      |         ^~~~~~
In file included from generate.c:16:
generate.c: In function 'push':
cstring.h:20:30: warning: operation on 'f->in.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:43:9: note: in expansion of macro 'EXPAND'
   43 |         EXPAND(f->in) = *bfr++;
      |         ^~~~~~
markdown.c: In function 'mkd_compile':
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:856:5: note: in expansion of macro 'CREATE'
  856 |     CREATE(doc->ctx->in);
      |     ^~~~~~
cstring.h:19:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
   19 | #define CREATE(x)       T(x) = (void*)(S(x) = (x).alloc = 0)
      |                                ^
markdown.c:858:5: note: in expansion of macro 'CREATE'
  858 |     CREATE(*doc->ctx->footnotes);
      |     ^~~~~~
ldiscount.c: In function 'ldiscount':
ldiscount.c:110:20: warning: passing argument 1 of 'mkd_string' discards 'const' qualifier from pointer target type [-Wdiscarded-qualifiers]
  110 |   doc = mkd_string(str, len, MKD_TABSTOP|MKD_NOHEADER);
      |                    ^~~
In file included from ldiscount.c:7:
markdown.h:108:29: note: expected 'char *' but argument is of type 'const char *'
  108 | extern Document *mkd_string(char*,int, int);
      |                             ^~~~~
generate.c: In function 'Qchar':
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:101:16: note: in expansion of macro 'EXPAND'
  101 |         cur = &EXPAND(f->Q);
      |                ^~~~~~
cstring.h:20:30: warning: operation on 'cur->b_text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:108:5: note: in expansion of macro 'EXPAND'
  108 |     EXPAND(cur->b_text) = c;
      |     ^~~~~~
generate.c: In function 'Qem':
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:153:17: note: in expansion of macro 'EXPAND'
  153 |     block *p = &EXPAND(f->Q);
      |                 ^~~~~~
cstring.h:20:30: warning: operation on 'f->Q.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:160:13: note: in expansion of macro 'EXPAND'
  160 |     memset(&EXPAND(f->Q), 0, sizeof(block));
      |             ^~~~~~
generate.c: In function 'emmatch':
cstring.h:20:30: warning: operation on 'start->b_text.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:246:17: note: in expansion of macro 'EXPAND'
  246 |                 EXPAND(start->b_text) = start->b_char;
      |                 ^~~~~~
generate.c: In function 'reparse':
cstring.h:20:30: warning: operation on 'sub.in.size' may be undefined [-Wsequence-point]
   20 | #define EXPAND(x)       (S(x)++)[(S(x) < (x).alloc) \
      |                         ~~~~~^~~
generate.c:289:5: note: in expansion of macro 'EXPAND'
  289 |     EXPAND(sub.in) = 0;
      |     ^~~~~~
gcc -o discount.so -shared docheader.o dumptree.o generate.o markdown.o mkdio.o resource.o ldiscount.o 
/usr/lib/gcc/x86_64-alpine-linux-musl/14.2.0/../../../../x86_64-alpine-linux-musl/bin/ld: warning: discount.so has a LOAD segment with RWX permissions
>>> lua-discount: Entering fakeroot...
>>> lua-discount-doc*: Running split function doc...
renamed 'usr/share/licenses' -> '/home/packager/aports/main/lua-discount/pkg/lua-discount-doc/usr/share/licenses'
>>> lua-discount-doc*: Preparing subpackage lua-discount-doc...
libfakeroot internal error: payload not recognized!
libfakeroot internal error: payload not recognized!
>>> lua-discount-doc*: Running postcheck for lua-discount-doc
>>> lua5.1-discount*: Running split function _split...
>>> lua5.1-discount*: Preparing subpackage lua5.1-discount...
>>> lua5.1-discount*: Stripping binaries
>>> lua5.1-discount*: Running postcheck for lua5.1-discount
>>> lua5.2-discount*: Running split function _split...
>>> lua5.2-discount*: Preparing subpackage lua5.2-discount...
>>> lua5.2-discount*: Stripping binaries
libfakeroot internal error: payload not recognized!
>>> lua5.2-discount*: Running postcheck for lua5.2-discount
>>> lua5.3-discount*: Running split function _split...
>>> lua5.3-discount*: Preparing subpackage lua5.3-discount...
>>> lua5.3-discount*: Stripping binaries
>>> lua5.3-discount*: Running postcheck for lua5.3-discount
>>> lua5.4-discount*: Running split function _split...
>>> lua5.4-discount*: Preparing subpackage lua5.4-discount...
>>> lua5.4-discount*: Stripping binaries
>>> lua5.4-discount*: Running postcheck for lua5.4-discount
>>> lua-discount*: Running postcheck for lua-discount
>>> lua-discount*: Preparing package lua-discount...
>>> lua-discount*: Stripping binaries
libfakeroot internal error: payload not recognized!
>>> WARNING: lua-discount*: No arch specific binaries found so arch should probably be set to "noarch"
>>> lua-discount-doc*: Scanning shared objects
>>> lua-discount*: Scanning shared objects
>>> lua5.1-discount*: Scanning shared objects
>>> lua5.2-discount*: Scanning shared objects
>>> lua5.3-discount*: Scanning shared objects
>>> lua5.4-discount*: Scanning shared objects
>>> lua-discount-doc*: Tracing dependencies...
>>> lua-discount-doc*: Package size: 2.4 KB
>>> lua-discount-doc*: Compressing data...
>>> lua-discount-doc*: Create checksum...
pigz: not found
>>> lua-discount-doc*: Create lua-discount-doc-1.2.10.1-r8.apk
>>> lua-discount*: Tracing dependencies...
>>> lua-discount*: Package size: 1.0 B
>>> lua-discount*: Compressing data...
>>> lua-discount*: Create checksum...
pigz: not found
>>> lua-discount*: Create lua-discount-1.2.10.1-r8.apk
>>> lua5.1-discount*: Tracing dependencies...
	so:libc.musl-x86_64.so.1
>>> lua5.1-discount*: Package size: 45.6 KB
>>> lua5.1-discount*: Compressing data...
>>> lua5.1-discount*: Create checksum...
pigz: not found
>>> lua5.1-discount*: Create lua5.1-discount-1.2.10.1-r8.apk
>>> lua5.2-discount*: Tracing dependencies...
	so:libc.musl-x86_64.so.1
>>> lua5.2-discount*: Package size: 45.6 KB
>>> lua5.2-discount*: Compressing data...
>>> lua5.2-discount*: Create checksum...
libfakeroot internal error: payload not recognized!
pigz: not found
>>> lua5.2-discount*: Create lua5.2-discount-1.2.10.1-r8.apk
>>> lua5.3-discount*: Tracing dependencies...
	so:libc.musl-x86_64.so.1
>>> lua5.3-discount*: Package size: 45.6 KB
>>> lua5.3-discount*: Compressing data...
>>> lua5.3-discount*: Create checksum...
pigz: not found
>>> lua5.3-discount*: Create lua5.3-discount-1.2.10.1-r8.apk
>>> lua5.4-discount*: Tracing dependencies...
	so:libc.musl-x86_64.so.1
>>> lua5.4-discount*: Package size: 45.6 KB
>>> lua5.4-discount*: Compressing data...
>>> lua5.4-discount*: Create checksum...
pigz: not found
>>> lua5.4-discount*: Create lua5.4-discount-1.2.10.1-r8.apk
>>> lua-discount: Build complete at Fri, 23 May 2025 00:51:16 +0000 elapsed time 0h 0m 20s
>>> lua-discount: Cleaning up srcdir
>>> lua-discount: Cleaning up pkgdir
>>> lua-discount: Uninstalling dependencies...
(1/12) Purging .makedepends-lua-discount (20250523.005058)
(2/12) Purging lua5.1-dev (5.1.5-r13)
(3/12) Purging lua5.1 (5.1.5-r13)
(4/12) Purging lua5.1-libs (5.1.5-r13)
(5/12) Purging lua5.2-dev (5.2.4-r13)
(6/12) Purging lua5.2 (5.2.4-r13)
(7/12) Purging lua5.2-libs (5.2.4-r13)
(8/12) Purging lua5.3-dev (5.3.6-r6)
(9/12) Purging lua5.3 (5.3.6-r6)
(10/12) Purging lua5.3-libs (5.3.6-r6)
(11/12) Purging lua5.4-dev (5.4.7-r0)
(12/12) Purging linenoise (1.0-r5)
Executing busybox-1.37.0-r12.trigger
OK: 313 MiB in 114 packages
>>> lua-discount: Updating the main/x86_64 repository index...
>>> lua-discount: Signing the index...
pigz: not found
